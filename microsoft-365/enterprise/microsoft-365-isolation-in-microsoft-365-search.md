---
title: Klient isolering i Microsoft 365 search
ms.author: josephd
author: JoeDavies-MSFT
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
f1.keywords:
- NOCSH
description: I den här artikeln finns en förklaring av hur klient isolering fungerar för separata innehavaradministration i Microsoft 365 search.
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: 9b204e9c1f3ef459852900f3403a21f7ea40541f
ms.sourcegitcommit: 79065e72c0799064e9055022393113dfcf40eb4b
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/14/2020
ms.locfileid: "46694338"
---
# <a name="tenant-isolation-in-microsoft-365-search"></a><span data-ttu-id="3f0e6-103">Klient isolering i Microsoft 365 search</span><span class="sxs-lookup"><span data-stu-id="3f0e6-103">Tenant Isolation in Microsoft 365 Search</span></span>

<span data-ttu-id="3f0e6-104">I SharePoint Online search används en modell för företags skiljare som balanserar effektiviteten hos delade data strukturer med skydd mot uppgifter som läcker mellan klient organisationer.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-104">SharePoint Online search uses a tenant separation model that balances the efficiency of shared data structures with protection against information leaking between tenants.</span></span> <span data-ttu-id="3f0e6-105">Med den här modellen kan vi förhindra Sök funktionerna från:</span><span class="sxs-lookup"><span data-stu-id="3f0e6-105">With this model, we prevent the Search features from:</span></span>

- <span data-ttu-id="3f0e6-106">Returnera frågeresultat som innehåller dokument från andra klient organisationer</span><span class="sxs-lookup"><span data-stu-id="3f0e6-106">Returning query results that contain documents from other tenants</span></span>
- <span data-ttu-id="3f0e6-107">Visar tillräckligt med information i frågeresultatet att en kunnig användare kan härleda information om andra klient organisationer</span><span class="sxs-lookup"><span data-stu-id="3f0e6-107">Exposing sufficient information in query results that a skilled user could infer information about other tenants</span></span>
- <span data-ttu-id="3f0e6-108">Visar schema eller inställningar från en annan klient organisation</span><span class="sxs-lookup"><span data-stu-id="3f0e6-108">Showing schema or settings from another tenant</span></span>
- <span data-ttu-id="3f0e6-109">Mixa analys bearbetnings information mellan innehavare eller lagra resultat i fel klient organisation</span><span class="sxs-lookup"><span data-stu-id="3f0e6-109">Mixing analytics processing information between tenants or store results in the wrong tenant</span></span>
- <span data-ttu-id="3f0e6-110">Använda ord listor från en annan klient organisation</span><span class="sxs-lookup"><span data-stu-id="3f0e6-110">Using dictionary entries from another tenant</span></span>

<span data-ttu-id="3f0e6-111">För varje typ av klient organisations data använder vi en eller flera skydds nivåer i koden för att förhindra oavsiktlig läckage av information.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-111">For each type of tenant data, we use one or more layers of protection in the code to prevent accidental leaking of information.</span></span> <span data-ttu-id="3f0e6-112">Den viktigaste informationen har de flesta skydds nivåerna för att se till att ett enskilt fel inte leder till att det finns ett faktiskt eller uppskattat informations läckage.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-112">The most critical data has the most layers of protection to make sure that a single defect doesn't result in actual or perceived information leakage.</span></span>

## <a name="tenant-separation-for-the-search-index"></a><span data-ttu-id="3f0e6-113">Innehavarens separation för Sök indexet</span><span class="sxs-lookup"><span data-stu-id="3f0e6-113">Tenant Separation for the Search Index</span></span>

<span data-ttu-id="3f0e6-114">Sök indexet lagras på hård disken i de servrar där index komponenterna finns och klient organisationerna delar indexfiler.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-114">The search index is stored on disk in the servers hosting the index components and the tenants share the index files.</span></span> <span data-ttu-id="3f0e6-115">En klient organisations indexerade dokument visas bara för frågor för den innehavaren.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-115">A tenant's indexed documents are visible only for queries for that tenant.</span></span> <span data-ttu-id="3f0e6-116">Tre oberoende mekanismer förhindrar att information läcker:</span><span class="sxs-lookup"><span data-stu-id="3f0e6-116">Three independent mechanisms prevent information leakage:</span></span>

- <span data-ttu-id="3f0e6-117">Filter för klient organisations-ID</span><span class="sxs-lookup"><span data-stu-id="3f0e6-117">Tenant ID filtering</span></span>
- <span data-ttu-id="3f0e6-118">Villkor för klient organisations-ID</span><span class="sxs-lookup"><span data-stu-id="3f0e6-118">Tenant ID term prefixing</span></span>
- <span data-ttu-id="3f0e6-119">ACL-kontroller</span><span class="sxs-lookup"><span data-stu-id="3f0e6-119">ACL checks</span></span>

<span data-ttu-id="3f0e6-120">Alla tre mekanismerna skulle inte fungera för sökning för att returnera dokument till fel klient organisation.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-120">All three mechanisms would have to fail for Search to return documents to the wrong tenant.</span></span>

## <a name="tenant-id-filtering-and-tenant-id-term-prefixing"></a><span data-ttu-id="3f0e6-121">Villkor för klient organisations-ID och term för klient-ID</span><span class="sxs-lookup"><span data-stu-id="3f0e6-121">Tenant ID Filtering and Tenant ID Term Prefixing</span></span>

<span data-ttu-id="3f0e6-122">Sökprefix varje term som är indexerad i full text index med klient-ID.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-122">Search prefixes every term that is indexed in the full-text index with the tenant ID.</span></span> <span data-ttu-id="3f0e6-123">När termen "*foo*" indexeras för en innehavare med ID "*123*", är posten i full text indexet "*123foo".*</span><span class="sxs-lookup"><span data-stu-id="3f0e6-123">For example, when the term "*foo*" is indexed for a tenant with an ID of "*123*", the entry in the full-text index is "*123foo.*"</span></span>

<span data-ttu-id="3f0e6-124">Alla frågor konverteras till att omfatta klient-ID med en process som heter klient-ID-filtrering.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-124">Every query is converted to include the tenant ID using a process called tenant ID filtering.</span></span> <span data-ttu-id="3f0e6-125">Frågan "*foo*" konverteras till exempel till "<*GUID*>. *foo* OCH *tenantID*: <*GUID*> ", där <*GUID*> representerar klient organisationens utförande av frågan.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-125">For example, the query "*foo*" is converted to "<*guid*>.*foo* AND *tenantID*:<*guid*>", where <*guid*> represents the tenant performing the query.</span></span> <span data-ttu-id="3f0e6-126">Den här frågans konvertering sker inom respektive indexattribut och varken frågor eller innehålls bearbetning kan påverka den.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-126">This query conversion occurs within each index node and neither query nor content processing can influence it.</span></span> <span data-ttu-id="3f0e6-127">Eftersom klient-ID läggs till i alla frågor kan inte frekvensen i andra klient organisationer uppskjutas genom att du har en lämplig matchnings rangordning i en klient organisation.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-127">Because the tenant ID is added to every query, the frequency of a term in other tenants can't be inferred by looking at best match ranking in one tenant.</span></span>

<span data-ttu-id="3f0e6-128">Villkor för innehavaradministration endast i full text indexet.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-128">Tenant ID term prefixing occurs only in the full-text index.</span></span> <span data-ttu-id="3f0e6-129">Fältade sökningar, till exempel "*title: foo*", går till ett syntetiskt Sök-index där villkoren inte är fasta efter klient-ID.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-129">Fielded searches, such as "*title:foo*", go to a synthetic search index where terms aren't prefixed by tenant ID.</span></span> <span data-ttu-id="3f0e6-130">I stället används fält namnet som prefix.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-130">Instead, fielded searches are prefixed with the field name.</span></span> <span data-ttu-id="3f0e6-131">Frågan "*title: foo*" konverteras till exempel till "*fält. title: foo och Fields. tenantID*: <*GUID*>."</span><span class="sxs-lookup"><span data-stu-id="3f0e6-131">For example, the query "*title:foo*" is converted to "*fields.title:foo AND fields.tenantID*:<*guid*>."</span></span> <span data-ttu-id="3f0e6-132">Eftersom frekvensen för en term inte påverkar rangordningen för träffar i det syntetiska Sök indexet behöver du inte använda funktionen för att skilja på innehavare.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-132">Because the frequency of a term doesn't influence ranking of hits in the synthetic search index, there's no need for tenant separation by term prefixing.</span></span> <span data-ttu-id="3f0e6-133">För en fälts ökning som "*title: foo*", beror på klientens innehålls skillnad av FRÅGANS ID-filtrering.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-133">For a fielded search like "*title:foo*", tenant content separation depends on tenant ID filtering by query conversion.</span></span>

## <a name="document-access-control-list-checks"></a><span data-ttu-id="3f0e6-134">Kontroller av dokument åtkomst kontroll listor</span><span class="sxs-lookup"><span data-stu-id="3f0e6-134">Document Access Control List Checks</span></span>

<span data-ttu-id="3f0e6-135">Sök kontrollerar åtkomsten till dokument via ACL-listor som sparas i Sök indexet.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-135">Search controls access to documents through ACLs that are saved in the search index.</span></span> <span data-ttu-id="3f0e6-136">Varje objekt indexeras med en uppsättning villkor i ett speciellt ACL-fält.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-136">Every item is indexed with a set of terms in a special ACL field.</span></span> <span data-ttu-id="3f0e6-137">Fältet ACL innehåller en term per grupp eller användare som kan visa dokumentet.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-137">The ACL field contains one term per group or user that can view the document.</span></span> <span data-ttu-id="3f0e6-138">Alla frågor utökas med en lista över tilläggs villkor för åtkomst kontroll (ACE), en för varje grupp som den autentiserade användaren tillhör.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-138">Every query is augmented with a list of access control entry (ACE) terms, one for each group to which the authenticated user belongs.</span></span>

<span data-ttu-id="3f0e6-139">En fråga som "<*guid*>. *Foo och tenantID*: <*GUID*> "blir:" <*GUID*>. *Foo och tenantID*: <*GUID* >  *och* (*docACL:* < *ace1* >  *eller docACL*: <*ace2* >  *eller docACL*: <*ace3* >  *...*) "</span><span class="sxs-lookup"><span data-stu-id="3f0e6-139">For example, a query like "<*guid*>.*foo AND tenantID*:<*guid*>" becomes: "<*guid*>.*foo AND tenantID*:<*guid*> *AND* (*docACL:*<*ace1*> *OR docACL*:<*ace2*> *OR docACL*:<*ace3*> *...*)"</span></span>

<span data-ttu-id="3f0e6-140">Eftersom användar-och grupp-ID: n är unika är detta en extra säkerhets nivå mellan innehavare för dokument som bara är synliga för vissa användare.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-140">Because user and group identifiers and hence ACEs are unique, this provides an extra level of security between tenants for documents that are only visible to some users.</span></span> <span data-ttu-id="3f0e6-141">Samma sak gäller för de särskilda "alla utom externa användare" som ger till gång till vanliga användare i klient organisationen.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-141">The same is the case for the special "Everyone except external users" ACE that grants access to regular users in the tenant.</span></span> <span data-ttu-id="3f0e6-142">Men eftersom åtkomst till "alla" är samma för alla klient organisationer, beror det på klientens separation för de offentliga dokumenten.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-142">But since ACEs for "Everyone" are the same for all tenants, tenant separation for public documents depends on tenant ID filtering.</span></span> <span data-ttu-id="3f0e6-143">Neka åtkomst till ess stöds också.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-143">Deny ACEs are also supported.</span></span> <span data-ttu-id="3f0e6-144">Frågan utökas till en sats som tar bort ett dokument från resultatet när det finns en träff med en nekande ACE.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-144">The query augmentation adds a clause that removes a document from the result when there is a match with a deny ACE.</span></span>

<span data-ttu-id="3f0e6-145">I Exchange Online search partitioneras indexet på post lådans ID för enskilda användares post lådor i stället för klient organisations-ID: t som i SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-145">In Exchange Online search, the index is partitioned on mailbox ID for individual user's mailboxes instead of tenant ID (subscription ID) as in SharePoint Online.</span></span> <span data-ttu-id="3f0e6-146">Partitionerings funktionen är samma som SharePoint Online, men ingen ACL-filtrering.</span><span class="sxs-lookup"><span data-stu-id="3f0e6-146">The partitioning mechanism is the same as SharePoint Online, but there is no ACL filtering.</span></span>
