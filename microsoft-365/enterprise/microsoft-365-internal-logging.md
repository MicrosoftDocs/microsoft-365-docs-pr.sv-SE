---
title: Microsoft 365 intern loggning för Microsoft 365-teknik
ms.author: josephd
author: JoeDavies-MSFT
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
f1.keywords:
- NOCSH
description: I den här artikeln finns en förklaring av hur intern loggning för Microsoft 365 Engineering Teams fungerar.
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: b4c4b1db876a6b68ec852adbbd51afe7386a1855
ms.sourcegitcommit: 79065e72c0799064e9055022393113dfcf40eb4b
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/14/2020
ms.locfileid: "46696723"
---
# <a name="internal-logging-for-microsoft-365-engineering"></a><span data-ttu-id="a340d-103">Intern loggning för Microsoft 365-teknik</span><span class="sxs-lookup"><span data-stu-id="a340d-103">Internal logging for Microsoft 365 engineering</span></span>

<span data-ttu-id="a340d-104">Utöver de händelser och loggdata som är tillgängliga för kunder finns det också ett internt system för data insamling som är tillgängligt för Microsoft 365-tekniker på Microsoft.</span><span class="sxs-lookup"><span data-stu-id="a340d-104">In addition to the events and log data available for customers, there is also an internal log data collection system that is available to Microsoft 365 engineers at Microsoft.</span></span> <span data-ttu-id="a340d-105">Många olika typer av loggdata laddas upp från Microsoft 365-servrar till en intern, stor data dator tjänst som heter Cosmos.</span><span class="sxs-lookup"><span data-stu-id="a340d-105">Many different types of log data are uploaded from Microsoft 365 servers to an internal, big data computing service called Cosmos.</span></span> <span data-ttu-id="a340d-106">Varje tjänst team uppladdar gransknings loggar från sina respektive servrar till Cosmos-databasen för agg regering och analys.</span><span class="sxs-lookup"><span data-stu-id="a340d-106">Each service team uploads audit logs from their respective servers into the Cosmos database for aggregation and analysis.</span></span> <span data-ttu-id="a340d-107">Denna data överföring sker via en FIPS 140-2-godkänd TLS-anslutning på specifika godkända portar och protokoll med ett eget Automation-verktyg som heter Office data Loader (ODL).</span><span class="sxs-lookup"><span data-stu-id="a340d-107">This data transfer occurs over a FIPS 140-2-validated TLS connection on specifically approved ports and protocols using a proprietary automation tool called the Office Data Loader (ODL).</span></span> <span data-ttu-id="a340d-108">De verktyg som används i Microsoft 365 för att samla in och bearbeta gransknings poster tillåter inte permanenta eller irreversibla ändringar av den ursprungliga gransknings postens innehåll eller tidsordning.</span><span class="sxs-lookup"><span data-stu-id="a340d-108">The tools used in Microsoft 365 to collect and process audit records do not allow permanent or irreversible changes to the original audit record content or time ordering.</span></span>

<span data-ttu-id="a340d-109">Service Teams använder Cosmos som en central lagrings plats för att utföra en analys av program användning, för att mäta system och operativa prestanda och för att söka efter avvikelser och mönster som kan tyda på problem eller säkerhets problem.</span><span class="sxs-lookup"><span data-stu-id="a340d-109">Service teams use Cosmos as a centralized repository to conduct an analysis of application usage, to measure system and operational performance, and to look for abnormalities and patterns that may indicate problems or security issues.</span></span> <span data-ttu-id="a340d-110">Varje tjänst team laddar upp en original plan för loggar till Cosmos, beroende på vad de använder för att analysera, som ofta inkluderar:</span><span class="sxs-lookup"><span data-stu-id="a340d-110">Each service team uploads a baseline of logs into Cosmos, depending on what they are looking to analyze, that often include:</span></span>

- <span data-ttu-id="a340d-111">Händelse loggar</span><span class="sxs-lookup"><span data-stu-id="a340d-111">Event logs</span></span>
- <span data-ttu-id="a340d-112">AppLocker-loggar</span><span class="sxs-lookup"><span data-stu-id="a340d-112">AppLocker logs</span></span>
- <span data-ttu-id="a340d-113">Prestanda data</span><span class="sxs-lookup"><span data-stu-id="a340d-113">Performance data</span></span>
- <span data-ttu-id="a340d-114">System Center-data</span><span class="sxs-lookup"><span data-stu-id="a340d-114">System Center data</span></span>
- <span data-ttu-id="a340d-115">Samtals detalj poster</span><span class="sxs-lookup"><span data-stu-id="a340d-115">Call detail records</span></span>
- <span data-ttu-id="a340d-116">Kvaliteten på upplevelse data</span><span class="sxs-lookup"><span data-stu-id="a340d-116">Quality of experience data</span></span>
- <span data-ttu-id="a340d-117">Webb server loggar för IIS</span><span class="sxs-lookup"><span data-stu-id="a340d-117">IIS Web Server logs</span></span>
- <span data-ttu-id="a340d-118">SQL Server-loggar</span><span class="sxs-lookup"><span data-stu-id="a340d-118">SQL Server logs</span></span>
- <span data-ttu-id="a340d-119">Syslog-data</span><span class="sxs-lookup"><span data-stu-id="a340d-119">Syslog data</span></span>
- <span data-ttu-id="a340d-120">Säkerhets gransknings loggar</span><span class="sxs-lookup"><span data-stu-id="a340d-120">Security audit logs</span></span>

<span data-ttu-id="a340d-121">Innan du laddar upp data i Cosmos använder ODL-programmet en rensnings tjänst för att obfuscate alla fält som innehåller kunddata, till exempel information om klient organisationen och informationen om identifierbara uppgifter, och ersätta dessa fält med ett hashvärde.</span><span class="sxs-lookup"><span data-stu-id="a340d-121">Prior to uploading data into Cosmos, the ODL application uses a scrubbing service to obfuscate any fields that contain customer data, such as tenant information and end-user identifiable information, and replace those fields with a hash value.</span></span> <span data-ttu-id="a340d-122">Anonymiserad och mellanliggande loggar skrivs om och överförs sedan till Cosmos.</span><span class="sxs-lookup"><span data-stu-id="a340d-122">The anonymized and hashed logs are rewritten and then uploaded into Cosmos.</span></span> <span data-ttu-id="a340d-123">Service Teams kör begränsade frågor mot deras data i Cosmos för korrelation, avisering och rapportering.</span><span class="sxs-lookup"><span data-stu-id="a340d-123">Service teams run scoped queries against their data in Cosmos for correlation, alerting, and reporting.</span></span> <span data-ttu-id="a340d-124">Perioden för gransknings logg data för bevarande i Cosmos bestäms av service Teams, de flesta gransknings loggdata bevaras i 90 dagar eller längre för att hantera säkerhets tillbuds undersökningar och för att uppfylla gällande bestämmelser om bevarande.</span><span class="sxs-lookup"><span data-stu-id="a340d-124">The period of audit log data retention in Cosmos is determined by the service teams; most audit log data is retained for 90 days or longer to support security incident investigations and to meet regulatory retention requirements.</span></span>

<span data-ttu-id="a340d-125">Åtkomst till Microsoft 365-data som lagras i Cosmos begränsas till behörig personal.</span><span class="sxs-lookup"><span data-stu-id="a340d-125">Access to Microsoft 365 data stored in Cosmos is restricted to authorized personnel.</span></span> <span data-ttu-id="a340d-126">Microsoft begränsar hanteringen av gransknings funktionerna till den begränsade del av tjänst team medlemmar som är ansvariga för gransknings funktionerna.</span><span class="sxs-lookup"><span data-stu-id="a340d-126">Microsoft restricts the management of audit functionality to the limited subset of service team members that are responsible for audit functionality.</span></span> <span data-ttu-id="a340d-127">Dessa team medlemmar har inte möjlighet att ändra eller ta bort data från Cosmos och alla ändringar i loggnings mekanismer för Cosmos registreras och granskas.</span><span class="sxs-lookup"><span data-stu-id="a340d-127">These team members do not have the ability to modify or delete data from Cosmos, and all changes to logging mechanisms for Cosmos are recorded and audited.</span></span>

<span data-ttu-id="a340d-128">Varje tjänst team får åtkomst till sina loggdata för analys genom att auktorisera vissa program för att genomföra en viss analys.</span><span class="sxs-lookup"><span data-stu-id="a340d-128">Each service team accesses its log data for analysis by authorizing certain applications to conduct specific analysis.</span></span> <span data-ttu-id="a340d-129">Säkerhets teamet för Microsoft 365 använder till exempel data från Cosmos via en tillverkarspecifik händelse logg tolkare för att korrelera, Avisera och generera åtgärds bara rapporter om möjlig misstänkt aktivitet i Microsoft 365-produktions miljön.</span><span class="sxs-lookup"><span data-stu-id="a340d-129">For example, the Microsoft 365 Security team uses data from Cosmos through a proprietary event log parser to correlate, alert, and generate actionable reports on possible suspicious activity in the Microsoft 365 production environment.</span></span> <span data-ttu-id="a340d-130">Rapporterna från dessa data används för att åtgärda säkerhets problem och för att förbättra tjänstens allmänna prestanda.</span><span class="sxs-lookup"><span data-stu-id="a340d-130">The reports from this data are used to correct vulnerabilities, and to improve the overall performance of the service.</span></span> <span data-ttu-id="a340d-131">Om en viss varning eller rapport kräver ytterligare undersökning kan tjänst personalen begära att data importeras tillbaka till Microsoft 365-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="a340d-131">If a specific alert or report requires further investigation, service personnel can request that data be imported back into the Microsoft 365 service.</span></span> <span data-ttu-id="a340d-132">Eftersom den specifika loggen som importeras från Cosmos är i krypterad och tjänste personal inte har åtkomst till dekrypteringsnyckeln, skickas mål loggen till program mässigt via en dekrypteringsnyckel som returnerar omfattnings resultat till den behöriga tjänsten.</span><span class="sxs-lookup"><span data-stu-id="a340d-132">Since the specific log being imported from Cosmos is in encrypted and service personnel do not have access to decryption keys, the target log is programmatically passed through a decryption service that returns scoped results to the authorized service personnel.</span></span> <span data-ttu-id="a340d-133">Eventuella säkerhets problem som upptäcks i den här övningen rapporteras och eskaleras med Microsofts standard funktioner för säkerhets tillbuds hantering.</span><span class="sxs-lookup"><span data-stu-id="a340d-133">Any vulnerabilities found from this exercise are reported and escalated using Microsoft's standard security incident management channels.</span></span>
