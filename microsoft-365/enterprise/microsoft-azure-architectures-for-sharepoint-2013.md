---
title: Microsoft Azure-arkitekturer för SharePoint 2013
ms.author: bcarter
author: brendacarter
manager: laurawi
ms.date: 12/15/2017
audience: ITPro
ms.topic: conceptual
ms.service: o365-solutions
localization_priority: Normal
ms.collection: Ent_O365
f1.keywords:
- CSH
ms.custom:
- Ent_Architecture
- seo-marvel-apr2020
ms.assetid: 98fc1006-9399-4ff0-a216-c7c05820d822
description: Lär dig vilka typer av SharePoint 2013-lösningar som kan lagras på virtuella Microsoft Azure-datorer och hur du ställer in Azure så att det fungerar som värd.
ms.openlocfilehash: eed74e2dcbe383f0f63e7f6ea2fc70fe7b51b1b3
ms.sourcegitcommit: 27b2b2e5c41934b918cac2c171556c45e36661bf
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 03/19/2021
ms.locfileid: "50924182"
---
# <a name="microsoft-azure-architectures-for-sharepoint-2013"></a><span data-ttu-id="7f130-103">Microsoft Azure-arkitekturer för SharePoint 2013</span><span class="sxs-lookup"><span data-stu-id="7f130-103">Microsoft Azure Architectures for SharePoint 2013</span></span>

<span data-ttu-id="7f130-104">Azure är en bra miljö för värd för en SharePoint Server 2013-lösning.</span><span class="sxs-lookup"><span data-stu-id="7f130-104">Azure is a good environment for hosting a SharePoint Server 2013 solution.</span></span> <span data-ttu-id="7f130-105">I de flesta fall rekommenderar vi Microsoft 365, men en SharePoint Server-servergrupp som finns i Azure kan vara ett bra alternativ för specifika lösningar.</span><span class="sxs-lookup"><span data-stu-id="7f130-105">In most cases, we recommend Microsoft 365, but a SharePoint Server farm hosted in Azure can be a good option for specific solutions.</span></span> <span data-ttu-id="7f130-106">I den här artikeln beskrivs hur du kan bygga SharePoint-lösningar så att de passar bra på Azure-plattformen.</span><span class="sxs-lookup"><span data-stu-id="7f130-106">This article describes how to architect SharePoint solutions so they are a good fit in the Azure platform.</span></span> <span data-ttu-id="7f130-107">Följande två specifika lösningar används som exempel:</span><span class="sxs-lookup"><span data-stu-id="7f130-107">The following two specific solutions are used as examples:</span></span>
  
- [<span data-ttu-id="7f130-108">SharePoint Server 2013 katastrofåterställning i Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="7f130-108">SharePoint Server 2013 Disaster Recovery in Microsoft Azure</span></span>](sharepoint-server-2013-disaster-recovery-in-microsoft-azure.md)
    
- [<span data-ttu-id="7f130-109">Internetwebbplatser i Microsoft Azure med SharePoint Server 2013</span><span class="sxs-lookup"><span data-stu-id="7f130-109">Internet Sites in Microsoft Azure using SharePoint Server 2013</span></span>](internet-sites-in-microsoft-azure-using-sharepoint-server-2013.md)
    
## <a name="recommended-sharepoint-solutions-for-azure-infrastructure-services"></a><span data-ttu-id="7f130-110">Rekommenderade SharePoint-lösningar för Azure-infrastrukturtjänster</span><span class="sxs-lookup"><span data-stu-id="7f130-110">Recommended SharePoint solutions for Azure Infrastructure Services</span></span>

<span data-ttu-id="7f130-111">Azure-infrastrukturtjänster är ett tilltalande alternativ för SharePoint-lösningar.</span><span class="sxs-lookup"><span data-stu-id="7f130-111">Azure infrastructure services is a compelling option for hosting SharePoint solutions.</span></span> <span data-ttu-id="7f130-112">Vissa lösningar är bättre lämpliga för den här plattformen än andra.</span><span class="sxs-lookup"><span data-stu-id="7f130-112">Some solutions are a better fit for this platform than others.</span></span> <span data-ttu-id="7f130-113">I följande tabell visas rekommenderade lösningar.</span><span class="sxs-lookup"><span data-stu-id="7f130-113">The following table shows recommended solutions.</span></span>
  
|<span data-ttu-id="7f130-114">**Lösning**</span><span class="sxs-lookup"><span data-stu-id="7f130-114">**Solution**</span></span>|<span data-ttu-id="7f130-115">**Därför rekommenderas den här lösningen för Azure**</span><span class="sxs-lookup"><span data-stu-id="7f130-115">**Why this solution is recommended for Azure**</span></span>|
|:-----|:-----|
|<span data-ttu-id="7f130-116">Utvecklings- och testmiljöer</span><span class="sxs-lookup"><span data-stu-id="7f130-116">Development and test environments</span></span>  <br/> |<span data-ttu-id="7f130-117">Det är enkelt att skapa och hantera dessa miljöer.</span><span class="sxs-lookup"><span data-stu-id="7f130-117">It's easy to create and manage these environments.</span></span>  <br/> |
|<span data-ttu-id="7f130-118">Katastrofåterställning av lokala SharePoint-farms till Azure</span><span class="sxs-lookup"><span data-stu-id="7f130-118">Disaster recovery of on-premises SharePoint farms to Azure</span></span>  <br/> |<span data-ttu-id="7f130-119">**Värdbaserad sekundär datacenter** Använd Azure i stället för att investera i ett sekundärt datacenter i en annan region.</span><span class="sxs-lookup"><span data-stu-id="7f130-119">**Hosted secondary datacenter** Use Azure instead of investing in a secondary datacenter in a different region.</span></span> <br/> <span data-ttu-id="7f130-120">**Låg kostnad för katastrofåterställningsmiljöer** Underhålla och betala för färre resurser än en lokal katastrofåterställningsmiljö.</span><span class="sxs-lookup"><span data-stu-id="7f130-120">**Lower-cost disaster-recovery environments** Maintain and pay for fewer resources than an on-premises disaster recovery environment.</span></span> <span data-ttu-id="7f130-121">Antalet resurser beror på vilken katastrofåterställningsmiljö du väljer: vänteläge för kallt tid, vänteläge för varmt eller vänteläge.</span><span class="sxs-lookup"><span data-stu-id="7f130-121">The number of resources depends on the disaster recovery environment you choose: cold standby, warm standby, or hot standby.</span></span> <br/> <span data-ttu-id="7f130-122">**Mer plattform för elasticitet** Vid en katastrof kan du enkelt skala ut din SharePoint-servergrupp för återställning så att den uppfyller inläsningskraven.</span><span class="sxs-lookup"><span data-stu-id="7f130-122">**More elastic platform** In the event of a disaster, easily scale-out your recovery SharePoint farm to meet load requirements.</span></span> <span data-ttu-id="7f130-123">Skala in när du inte längre behöver resurserna.</span><span class="sxs-lookup"><span data-stu-id="7f130-123">Scale in when you no longer need the resources.</span></span> <br/> <span data-ttu-id="7f130-124">Se [SharePoint Server 2013 Katastrofåterställning i Microsoft Azure.](sharepoint-server-2013-disaster-recovery-in-microsoft-azure.md)</span><span class="sxs-lookup"><span data-stu-id="7f130-124">See [SharePoint Server 2013 Disaster Recovery in Microsoft Azure](sharepoint-server-2013-disaster-recovery-in-microsoft-azure.md).</span></span>  <br/> |
|<span data-ttu-id="7f130-125">Webbplatser på Internet som använder funktioner och skalning som inte är tillgängliga i Microsoft 365</span><span class="sxs-lookup"><span data-stu-id="7f130-125">Internet-facing sites that use features and scale not available in Microsoft 365</span></span>  <br/> |<span data-ttu-id="7f130-126">**Fokusera ditt arbete** Koncentrera dig på att skapa en bra webbplats i stället för att skapa infrastruktur.</span><span class="sxs-lookup"><span data-stu-id="7f130-126">**Focus your efforts** Concentrate on building a great site rather than building infrastructure.</span></span> <br/> <span data-ttu-id="7f130-127">**Dra nytta av flexibiliteten i Azure** Ändra storleken på servergruppen för begäran genom att lägga till nya servrar och betala endast för resurser du behöver.</span><span class="sxs-lookup"><span data-stu-id="7f130-127">**Take advantage of elasticity in Azure** Size the farm for the demand by adding new servers, and pay only for resources you need.</span></span> <span data-ttu-id="7f130-128">Dynamisk maskintilldelning stöds inte (automatisk skalning).</span><span class="sxs-lookup"><span data-stu-id="7f130-128">Dynamic machine allocation is not supported (auto scale).</span></span> <br/> <span data-ttu-id="7f130-129">**Använda Azure Active Directory (AD)** Dra nytta av Azure AD för kundkonton.</span><span class="sxs-lookup"><span data-stu-id="7f130-129">**Use Azure Active Directory (AD)** Take advantage of Azure AD for customer accounts.</span></span> <br/> <span data-ttu-id="7f130-130">**Lägga till SharePoint-funktioner som inte är tillgängliga i Microsoft 365** Lägg till djuprapportering och webbanalys.</span><span class="sxs-lookup"><span data-stu-id="7f130-130">**Add SharePoint functionality not available in Microsoft 365** Add deep reporting and web analytics.</span></span> <br/> <span data-ttu-id="7f130-131">Se [Internetwebbplatser i Microsoft Azure med hjälp av SharePoint Server 2013.](internet-sites-in-microsoft-azure-using-sharepoint-server-2013.md)</span><span class="sxs-lookup"><span data-stu-id="7f130-131">See [Internet Sites in Microsoft Azure using SharePoint Server 2013](internet-sites-in-microsoft-azure-using-sharepoint-server-2013.md).</span></span>  <br/> |
|<span data-ttu-id="7f130-132">Appgrupper som stöder Microsoft 365 eller lokala miljöer</span><span class="sxs-lookup"><span data-stu-id="7f130-132">App farms to support Microsoft 365 or on-premises environments</span></span>  <br/> |<span data-ttu-id="7f130-133">**Skapa, testa och vara värd för** appar i Azure med stöd för både lokala miljöer och molnmiljöer.</span><span class="sxs-lookup"><span data-stu-id="7f130-133">**Build, test, and host apps** in Azure to support both on-premises and cloud environments.</span></span> <br/> <span data-ttu-id="7f130-134">**Hantera den här** rollen i Azure i stället för att köpa ny maskinvara för lokala miljöer.</span><span class="sxs-lookup"><span data-stu-id="7f130-134">**Host this role** in Azure instead of buying new hardware for on-premises environments.</span></span> <br/> |
   
<span data-ttu-id="7f130-135">För lösningar och arbetsbelastningar på intranät och samarbete bör du tänka på följande alternativ:</span><span class="sxs-lookup"><span data-stu-id="7f130-135">For intranet and collaboration solutions and workloads, consider the following options:</span></span>
  
- <span data-ttu-id="7f130-136">Avgör om Microsoft 365 uppfyller dina affärskrav eller kan vara en del av lösningen.</span><span class="sxs-lookup"><span data-stu-id="7f130-136">Determine if Microsoft 365 meets your business requirements or can be part of the solution.</span></span> <span data-ttu-id="7f130-137">Microsoft 365 har en omfattande funktionsuppsättning som alltid är uppdaterad.</span><span class="sxs-lookup"><span data-stu-id="7f130-137">Microsoft 365 provides a rich feature set that is always up to date.</span></span>
    
- <span data-ttu-id="7f130-138">Om Microsoft 365 inte uppfyller alla affärskrav bör du överväga en standardimplementering av SharePoint 2013 lokalt från Microsoft Consulting Services (MCS).</span><span class="sxs-lookup"><span data-stu-id="7f130-138">If Microsoft 365 does not meet all your business requirements, consider a standard implementation of SharePoint 2013 on premises from Microsoft Consulting Services (MCS).</span></span> <span data-ttu-id="7f130-139">En standardarkitektur kan vara en snabbare, billigare och enklare lösning för dig att stödja än en anpassad.</span><span class="sxs-lookup"><span data-stu-id="7f130-139">A standard architecture can be a quicker, cheaper, and easier solution for you to support than a customized one.</span></span> 
    
- <span data-ttu-id="7f130-140">Om en standardimplementering inte uppfyller dina affärskrav kan du överväga en anpassad lokal lösning.</span><span class="sxs-lookup"><span data-stu-id="7f130-140">If a standard implementation doesn't meet your business requirements, consider a customized on-premises solution.</span></span>
    
- <span data-ttu-id="7f130-141">Om det är viktigt att använda en molnplattform för dina affärskrav bör du överväga en standard eller anpassad implementering av SharePoint 2013 som finns i Azure-infrastrukturtjänster.</span><span class="sxs-lookup"><span data-stu-id="7f130-141">If using a cloud platform is important for your business requirements, consider a standard or customized implementation of SharePoint 2013 hosted in Azure infrastructure services.</span></span> <span data-ttu-id="7f130-142">SharePoint-lösningar är mycket enklare att stödja i Azure än andra offentliga Microsoft-molnplattformar som inte är inbyggda i Microsoft.</span><span class="sxs-lookup"><span data-stu-id="7f130-142">SharePoint solutions are much easier to support in Azure than other non-native Microsoft public cloud platforms.</span></span>
    
## <a name="before-you-design-the-azure-environment"></a><span data-ttu-id="7f130-143">Innan du utformar Azure-miljön</span><span class="sxs-lookup"><span data-stu-id="7f130-143">Before you design the Azure environment</span></span>

<span data-ttu-id="7f130-144">I den här artikeln används exempel på SharePoint-topologier, men du kan använda de här designkoncepten med valfri SharePoint-servergruppstopologi.</span><span class="sxs-lookup"><span data-stu-id="7f130-144">While this article uses example SharePoint topologies, you can use these design concepts with any SharePoint farm topology.</span></span> <span data-ttu-id="7f130-145">Innan du utformar Azure-miljön bör du använda följande topologi, arkitektur, kapacitet och prestandavägledning för att utforma SharePoint-servergruppen:</span><span class="sxs-lookup"><span data-stu-id="7f130-145">Before you design the Azure environment, use the following topology, architecture, capacity, and performance guidance to design the SharePoint farm:</span></span>
  
- [<span data-ttu-id="7f130-146">Arkitekturdesign för IT-proffs i SharePoint 2013</span><span class="sxs-lookup"><span data-stu-id="7f130-146">Architecture design for SharePoint 2013 IT pros</span></span>](/SharePoint/technical-reference/technical-diagrams)
    
- [<span data-ttu-id="7f130-147">Planera för prestanda- och kapacitetshantering i SharePoint Server 2013</span><span class="sxs-lookup"><span data-stu-id="7f130-147">Plan for performance and capacity management in SharePoint Server 2013</span></span>](/SharePoint/administration/performance-planning-in-sharepoint-server-2013)
    
## <a name="determine-the-active-directory-domain-type"></a><span data-ttu-id="7f130-148">Fastställa Active Directory-domäntypen</span><span class="sxs-lookup"><span data-stu-id="7f130-148">Determine the Active Directory domain type</span></span>

<span data-ttu-id="7f130-149">Varje SharePoint Server-servergrupp använder Active Directory för att tillhandahålla administrativa konton för servergruppskonfigurationen.</span><span class="sxs-lookup"><span data-stu-id="7f130-149">Each SharePoint Server farm relies on Active Directory to provide administrative accounts for farm setup.</span></span> <span data-ttu-id="7f130-150">För stunden finns det två alternativ för SharePoint-lösningar i Azure.</span><span class="sxs-lookup"><span data-stu-id="7f130-150">At this time, there are two options for SharePoint solutions in Azure.</span></span> <span data-ttu-id="7f130-151">Dessa beskrivs i följande tabell.</span><span class="sxs-lookup"><span data-stu-id="7f130-151">These are described in the following table.</span></span>
  
|<span data-ttu-id="7f130-152">**Alternativ**</span><span class="sxs-lookup"><span data-stu-id="7f130-152">**Option**</span></span>|<span data-ttu-id="7f130-153">**Beskrivning**</span><span class="sxs-lookup"><span data-stu-id="7f130-153">**Description**</span></span>|
|:-----|:-----|
|<span data-ttu-id="7f130-154">Dedikerad domän</span><span class="sxs-lookup"><span data-stu-id="7f130-154">Dedicated domain</span></span>  <br/> |<span data-ttu-id="7f130-155">Du kan distribuera en dedikerad och isolerad Active Directory-domän till Azure för att stödja SharePoint-servergruppen.</span><span class="sxs-lookup"><span data-stu-id="7f130-155">You can deploy a dedicated and isolated Active Directory domain to Azure to support your SharePoint farm.</span></span> <span data-ttu-id="7f130-156">Det här är ett bra val för offentliga webbplatser.</span><span class="sxs-lookup"><span data-stu-id="7f130-156">This is a good choice for public-facing Internet sites.</span></span>  <br/> |
|<span data-ttu-id="7f130-157">Utöka den lokala domänen genom en lokal anslutning</span><span class="sxs-lookup"><span data-stu-id="7f130-157">Extend the on-premises domain through a cross-premises connection</span></span>  <br/> |<span data-ttu-id="7f130-158">När du utökar den lokala domänen genom en lokal anslutning får användarna åtkomst till SharePoint-servergruppen via ditt intranät som om den vore värd lokal.</span><span class="sxs-lookup"><span data-stu-id="7f130-158">When you extend the on-premises domain through a cross-premises connection, users access the SharePoint farm via your intranet as if it were hosted on-premises.</span></span> <span data-ttu-id="7f130-159">Du kan dra nytta av din lokala Active Directory- och DNS-implementering.</span><span class="sxs-lookup"><span data-stu-id="7f130-159">You can take advantage of your on-premises Active Directory and DNS implementation.</span></span>  <br/> <span data-ttu-id="7f130-160">En tvärlokal anslutning krävs för att bygga en katastrofåterställningsmiljö i Azure för att växla till från den lokala servergruppen.</span><span class="sxs-lookup"><span data-stu-id="7f130-160">A cross-premises connection is required for building a disaster-recovery environment in Azure to fail over to from your on-premises farm.</span></span>  <br/> |
   
<span data-ttu-id="7f130-161">Den här artikeln innehåller designbegrepp för utökning av den lokala domänen via en tvärlokal anslutning.</span><span class="sxs-lookup"><span data-stu-id="7f130-161">This article includes design concepts for extending the on-premises domain through a cross-premises connection.</span></span> <span data-ttu-id="7f130-162">Om lösningen använder en dedikerad domän behöver du inte en tvärlokal anslutning.</span><span class="sxs-lookup"><span data-stu-id="7f130-162">If your solution uses a dedicated domain, you don't need a cross-premises connection.</span></span>
  
## <a name="design-the-virtual-network"></a><span data-ttu-id="7f130-163">Designa det virtuella nätverket</span><span class="sxs-lookup"><span data-stu-id="7f130-163">Design the virtual network</span></span>

<span data-ttu-id="7f130-164">Först behöver du ett virtuellt nätverk i Azure, som innehåller undernät där du ska placera dina virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="7f130-164">First you need a virtual network in Azure, which includes subnets on which you will place your virtual machines.</span></span> <span data-ttu-id="7f130-165">Det virtuella nätverket behöver ett privat IP-adressutrymme, som du tilldelar undernäten till delar av.</span><span class="sxs-lookup"><span data-stu-id="7f130-165">The virtual network needs a private IP address space, portions of which you assign to the subnets.</span></span>
  
<span data-ttu-id="7f130-166">Om du utökar det lokala nätverket till Azure via en tvärlokal anslutning (krävs för en katastrofåterställningsmiljö) måste du välja ett privat adressutrymme som inte redan används någon annanstans i organisationsnätverket, vilket kan inkludera din lokala miljö och andra virtuella Azure-nätverk.</span><span class="sxs-lookup"><span data-stu-id="7f130-166">If you are extending your on-premises network to Azure through a cross-premises connection (required for a disaster recovery environment), you must choose a private address space that is not already in use elsewhere in your organization network, which can include your on-premises environment and other Azure virtual networks.</span></span> 
  
<span data-ttu-id="7f130-167">**Bild 1: Lokal miljö med ett virtuellt nätverk i Azure**</span><span class="sxs-lookup"><span data-stu-id="7f130-167">**Figure 1: On-premises environment with a virtual network in Azure**</span></span>

![Virtuell Nätverksdesign för Microsoft Azure för en SharePoint-lösning.](../media/OPrrasconWA-AZarch.png)
  
<span data-ttu-id="7f130-171">I det här diagrammet:</span><span class="sxs-lookup"><span data-stu-id="7f130-171">In this diagram:</span></span>
  
- <span data-ttu-id="7f130-172">Ett virtuellt nätverk i Azure illustreras sida vid sida med den lokala miljön.</span><span class="sxs-lookup"><span data-stu-id="7f130-172">A virtual network in Azure is illustrated side-by-side to the on-premises environment.</span></span> <span data-ttu-id="7f130-173">De två miljöerna är ännu inte anslutna med en tvärlokal anslutning, som kan vara en VPN-anslutning mellan webbplatser eller ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="7f130-173">The two environments are not yet connected by a cross-premises connection, which can be a site-to-site VPN connection or ExpressRoute.</span></span>
    
- <span data-ttu-id="7f130-174">I det här läget innehåller det virtuella nätverket bara undernäten och inga andra arkitekturelement.</span><span class="sxs-lookup"><span data-stu-id="7f130-174">At this point, the virtual network just includes the subnets and no other architectural elements.</span></span> <span data-ttu-id="7f130-175">Ett undernät är värd för Azure Gateway och andra undernät är värd för nivåerna i SharePoint-servergruppen, med ytterligare ett för Active Directory och DNS.</span><span class="sxs-lookup"><span data-stu-id="7f130-175">One subnet will host the Azure gateway and other subnets host the tiers of the SharePoint farm, with an additional one for Active Directory and DNS.</span></span>
    
## <a name="add-cross-premises-connectivity"></a><span data-ttu-id="7f130-176">Lägga till en tvärlokal anslutning</span><span class="sxs-lookup"><span data-stu-id="7f130-176">Add cross-premises connectivity</span></span>

<span data-ttu-id="7f130-177">Nästa steg i distributionen är att skapa den tvärlokala anslutningen (om det här gäller din lösning).</span><span class="sxs-lookup"><span data-stu-id="7f130-177">The next deployment step is to create the cross-premises connection (if this applies to your solution).</span></span> <span data-ttu-id="7f130-178">För tvärlokala anslutningar finns en Azure Gateway i ett separat gatewayundernät som du måste skapa och tilldela ett adressutrymme.</span><span class="sxs-lookup"><span data-stu-id="7f130-178">For cross-premises connections, a Azure gateway resides in a separate gateway subnet, which you must create and assign an address space.</span></span> 
  
<span data-ttu-id="7f130-179">När du planerar för en tvärlokal anslutning definierar och skapar du en Azure-gateway och anslutning till en lokal gatewayenhet.</span><span class="sxs-lookup"><span data-stu-id="7f130-179">When you plan for a cross-premises connection, you define and create an Azure gateway and connection to an on-premises gateway device.</span></span>
  
<span data-ttu-id="7f130-180">**Bild 2: Använda en Azure-gateway och en lokal gatewayenhet för att tillhandahålla anslutning mellan den lokala miljön och Azure**</span><span class="sxs-lookup"><span data-stu-id="7f130-180">**Figure 2: Using an Azure gateway and an on-premises gateway device to provide site-to-site connectivity between the on-premises environment and Azure**</span></span>

![Lokal miljö som är ansluten till ett virtuellt Azure-nätverk via en lokal anslutning, som kan vara en VPN-anslutning mellan webbplatser eller ExpressRoute](../media/AZarch-VPNgtwyconnct.png)
  
<span data-ttu-id="7f130-182">I det här diagrammet:</span><span class="sxs-lookup"><span data-stu-id="7f130-182">In this diagram:</span></span>
  
- <span data-ttu-id="7f130-183">Om du lägger till föregående diagram är den lokala miljön ansluten till det virtuella Azure-nätverket via en lokal anslutning, som kan vara en VPN-anslutning mellan webbplatser eller ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="7f130-183">Adding to the previous diagram, the on-premises environment is connected to the Azure virtual network by a cross-premise connection, which can be a site-to-site VPN connection or ExpressRoute.</span></span>
    
- <span data-ttu-id="7f130-184">En Azure-gateway finns på ett gatewayundernät.</span><span class="sxs-lookup"><span data-stu-id="7f130-184">An Azure gateway is on a gateway subnet.</span></span>
    
- <span data-ttu-id="7f130-185">I den lokala miljön ingår en gatewayenhet, till exempel en router eller VPN-server.</span><span class="sxs-lookup"><span data-stu-id="7f130-185">The on-premises environment includes a gateway device, such as a router or VPN server.</span></span>
    
<span data-ttu-id="7f130-186">Mer information om hur du planerar för och skapar ett virtuellt korslokalt nätverk finns i Ansluta ett lokalt [nätverk till ett virtuellt Microsoft Azure-nätverk.](connect-an-on-premises-network-to-a-microsoft-azure-virtual-network.md)</span><span class="sxs-lookup"><span data-stu-id="7f130-186">For additional information to plan for and create a cross-premises virtual network, see [Connect an on-premises network to a Microsoft Azure virtual network](connect-an-on-premises-network-to-a-microsoft-azure-virtual-network.md).</span></span>
  
## <a name="add-active-directory-domain-services-ad-ds-and-dns"></a><span data-ttu-id="7f130-187">Lägga till AD DS (Active Directory Domain Services) och DNS</span><span class="sxs-lookup"><span data-stu-id="7f130-187">Add Active Directory Domain Services (AD DS) and DNS</span></span>

<span data-ttu-id="7f130-188">För katastrofåterställning i Azure distribuerar du Windows Server AD och DNS i ett hybridscenario där Windows Server AD distribueras både lokalt och på virtuella Azure-datorer.</span><span class="sxs-lookup"><span data-stu-id="7f130-188">For disaster recovery in Azure, you deploy Windows Server AD and DNS in a hybrid scenario where Windows Server AD is deployed both on-premises and on Azure virtual machines.</span></span>
  
<span data-ttu-id="7f130-189">**Bild 3: Hybridkonfiguration av Active Directory-domän**</span><span class="sxs-lookup"><span data-stu-id="7f130-189">**Figure 3: Hybrid Active Directory domain configuration**</span></span>

![STvå virtuella datorer som distribuerats till det virtuella Azure-nätverket och SharePoint-servergruppsundernätet är replika domänkontrollanter och DNS-servrar](../media/AZarch-HyADdomainConfig.png)
  
<span data-ttu-id="7f130-191">Det här diagrammet bygger på de tidigare diagrammen genom att lägga till två virtuella datorer till ett Windows Server AD- och DNS-undernät.</span><span class="sxs-lookup"><span data-stu-id="7f130-191">This diagram builds on the previous diagrams by adding two virtual machines to a Windows Server AD and DNS subnet.</span></span> <span data-ttu-id="7f130-192">Dessa virtuella datorer är replikdomänkontrollanter och DNS-servrar.</span><span class="sxs-lookup"><span data-stu-id="7f130-192">These virtual machines are replica domain controllers and DNS servers.</span></span> <span data-ttu-id="7f130-193">De är ett tillägg till den lokala Windows Server AD-miljön.</span><span class="sxs-lookup"><span data-stu-id="7f130-193">They are an extension of the on-premises Windows Server AD environment.</span></span> 
  
<span data-ttu-id="7f130-194">Följande tabell innehåller konfigurationsrekommendationer för dessa virtuella datorer i Azure.</span><span class="sxs-lookup"><span data-stu-id="7f130-194">The following table provides configuration recommendations for these virtual machines in Azure.</span></span> <span data-ttu-id="7f130-195">Använd dem som utgångspunkt för att utforma din egen miljö, även för en dedikerad domän där Azure-miljön inte kommunicerar med din lokala miljö.</span><span class="sxs-lookup"><span data-stu-id="7f130-195">Use these as a starting point for designing your own environment—even for a dedicated domain where your Azure environment doesn't communicate with your on-premises environment.</span></span>
  
|<span data-ttu-id="7f130-196">**Objekt**</span><span class="sxs-lookup"><span data-stu-id="7f130-196">**Item**</span></span>|<span data-ttu-id="7f130-197">**Konfiguration**</span><span class="sxs-lookup"><span data-stu-id="7f130-197">**Configuration**</span></span>|
|:-----|:-----|
|<span data-ttu-id="7f130-198">Storlek på virtuell dator i Azure</span><span class="sxs-lookup"><span data-stu-id="7f130-198">Virtual machine size in Azure</span></span>  <br/> |<span data-ttu-id="7f130-199">A1- eller A2-storlek på standardnivån</span><span class="sxs-lookup"><span data-stu-id="7f130-199">A1 or A2 size in the Standard tier</span></span>  <br/> |
|<span data-ttu-id="7f130-200">Operativsystem</span><span class="sxs-lookup"><span data-stu-id="7f130-200">Operating system</span></span>  <br/> |<span data-ttu-id="7f130-201">Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="7f130-201">Windows Server 2012 R2</span></span>  <br/> |
|<span data-ttu-id="7f130-202">Active Directory-roll</span><span class="sxs-lookup"><span data-stu-id="7f130-202">Active Directory role</span></span>  <br/> |<span data-ttu-id="7f130-203">AD DS-domänkontrollant som angetts som global katalogserver.</span><span class="sxs-lookup"><span data-stu-id="7f130-203">AD DS domain controller designated as a global catalog server.</span></span> <span data-ttu-id="7f130-204">Den här konfigurationen minskar den utgående trafiken genom den tvärlokala anslutningen.</span><span class="sxs-lookup"><span data-stu-id="7f130-204">This configuration reduces egress traffic across the cross-premises connection.</span></span>  <br/> <span data-ttu-id="7f130-205">I en miljö med flera domäner med höga förändringshastigheter (detta är inte vanligt) konfigurerar du domänkontrollanter lokalt så att de inte synkroniseras med de globala katalogservrarna i Azure, för att minska replikeringstrafiken.</span><span class="sxs-lookup"><span data-stu-id="7f130-205">In a multidomain environment with high rates of change (this is not common), configure domain controllers on premises not to sync with the global catalog servers in Azure, to reduce replication traffic.</span></span>  <br/> |
|<span data-ttu-id="7f130-206">DNS-roll</span><span class="sxs-lookup"><span data-stu-id="7f130-206">DNS role</span></span>  <br/> |<span data-ttu-id="7f130-207">Installera och konfigurera DNS-servertjänsten på domänkontrollanterna.</span><span class="sxs-lookup"><span data-stu-id="7f130-207">Install and configure the DNS Server service on the domain controllers.</span></span>  <br/> |
|<span data-ttu-id="7f130-208">Datadiskar</span><span class="sxs-lookup"><span data-stu-id="7f130-208">Data disks</span></span>  <br/> |<span data-ttu-id="7f130-209">Placera Active Directory-databasen, loggarna och SYSVOL på ytterligare Azure-datadiskar.</span><span class="sxs-lookup"><span data-stu-id="7f130-209">Place the Active Directory database, logs, and SYSVOL on additional Azure data disks.</span></span> <span data-ttu-id="7f130-210">Placera inte dessa på operativsystemets disk eller de tillfälliga diskar som tillhandahålls av Azure.</span><span class="sxs-lookup"><span data-stu-id="7f130-210">Do not place these on the operating system disk or the temporary disks provided by Azure.</span></span>  <br/> |
|<span data-ttu-id="7f130-211">IP-adresser</span><span class="sxs-lookup"><span data-stu-id="7f130-211">IP addresses</span></span>  <br/> |<span data-ttu-id="7f130-212">Använd statiska IP-adresser och konfigurera det virtuella nätverket för att tilldela de här adresserna till virtuella datorer i det virtuella nätverket efter att domänkontrollanterna har konfigurerats.</span><span class="sxs-lookup"><span data-stu-id="7f130-212">Use static IP addresses and configure the virtual network to assign these addresses to the virtual machines in the virtual network after the domain controllers have been configured.</span></span>  <br/> |
   
> [!IMPORTANT]
> <span data-ttu-id="7f130-213">Innan du distribuerar Active Directory i Azure bör du [läsa Riktlinjer för distribution av Windows Server Active Directory på virtuella Azure-datorer.](/windows-server/identity/ad-ds/introduction-to-active-directory-domain-services-ad-ds-virtualization-level-100)</span><span class="sxs-lookup"><span data-stu-id="7f130-213">Before you deploy Active Directory in Azure, read [Guidelines for Deploying Windows Server Active Directory on Azure Virtual Machines](/windows-server/identity/ad-ds/introduction-to-active-directory-domain-services-ad-ds-virtualization-level-100).</span></span> <span data-ttu-id="7f130-214">Det här hjälper dig att avgöra om en annan arkitektur eller olika konfigurationsinställningar krävs för din lösning.</span><span class="sxs-lookup"><span data-stu-id="7f130-214">These help you determine if a different architecture or different configuration settings are needed for your solution.</span></span> 
  
## <a name="add-the-sharepoint-farm"></a><span data-ttu-id="7f130-215">Lägga till SharePoint-servergruppen</span><span class="sxs-lookup"><span data-stu-id="7f130-215">Add the SharePoint farm</span></span>

<span data-ttu-id="7f130-216">Placera virtuella datorer i SharePoint-servergruppen på nivåer på lämpliga undernät.</span><span class="sxs-lookup"><span data-stu-id="7f130-216">Place the virtual machines of the SharePoint farm in tiers on the appropriate subnets.</span></span>
  
<span data-ttu-id="7f130-217">**Bild 4: Placering av virtuella SharePoint-datorer**</span><span class="sxs-lookup"><span data-stu-id="7f130-217">**Figure 4: Placement of SharePoint virtual machines**</span></span>

![Databasservrar och SharePoint-serverroller läggs till i Det virtuella Azure-nätverket i SharePoint Farm-undernätet](../media/AZarch-SPVMsinCloudSer.png)
  
<span data-ttu-id="7f130-219">Det här diagrammet bygger på de tidigare diagrammen genom att lägga till SharePoint-servergruppsrollerna i sina respektive nivåer.</span><span class="sxs-lookup"><span data-stu-id="7f130-219">This diagram builds on the previous diagrams by adding the SharePoint farm server roles in their respective tiers.</span></span>
  
- <span data-ttu-id="7f130-220">Två virtuella databasdatorer med SQL Server skapar databasnivån.</span><span class="sxs-lookup"><span data-stu-id="7f130-220">Two database virtual machines running SQL Server create the database tier.</span></span>
    
- <span data-ttu-id="7f130-221">Två virtuella datorer med SharePoint Server 2013 för var och en av följande nivåer: frontendservrar, distribuerade cacheservrar och serverservrar.</span><span class="sxs-lookup"><span data-stu-id="7f130-221">Two virtual machines running SharePoint Server 2013 for each of the following tiers: front end servers, distributed cache servers, and back end servers.</span></span>
    
## <a name="design-and-fine-tune-server-roles-for-availability-sets-and-fault-domains"></a><span data-ttu-id="7f130-222">Designa och finjustera serverroller för tillgänglighetsuppsättningar och feldomäner</span><span class="sxs-lookup"><span data-stu-id="7f130-222">Design and fine tune server roles for availability sets and fault domains</span></span>

<span data-ttu-id="7f130-223">En feldomän är en gruppering av maskinvara där rollinstanser körs.</span><span class="sxs-lookup"><span data-stu-id="7f130-223">A fault domain is a grouping of hardware in which role instances run.</span></span> <span data-ttu-id="7f130-224">Virtuella datorer inom samma feldomän kan uppdateras samtidigt av Azure-infrastrukturen.</span><span class="sxs-lookup"><span data-stu-id="7f130-224">Virtual machines within the same fault domain can be updated by the Azure infrastructure at the same time.</span></span> <span data-ttu-id="7f130-225">Eller så kan de misslyckas på samma gång eftersom de har samma rack.</span><span class="sxs-lookup"><span data-stu-id="7f130-225">Or, they can fail at the same time because they share the same rack.</span></span> <span data-ttu-id="7f130-226">Du kan undvika risken att ha två virtuella datorer på samma feldomän genom att konfigurera dina virtuella datorer som en tillgänglighetsuppsättning som säkerställer att varje virtuell dator ligger i en annan feldomän.</span><span class="sxs-lookup"><span data-stu-id="7f130-226">To avoid the risk of having two virtual machines on the same fault domain, you can configure your virtual machines as an availability set, which ensures that each virtual machine is in a different fault domain.</span></span> <span data-ttu-id="7f130-227">Om tre virtuella datorer konfigureras som en tillgänglighetsuppsättning garanterar Azure att inte fler än två av de virtuella maskinerna finns i samma feldomän.</span><span class="sxs-lookup"><span data-stu-id="7f130-227">If three virtual machines are configured as an availability set, Azure guarantees that no more than two of the virtual machines are located in the same fault domain.</span></span>
  
<span data-ttu-id="7f130-228">När du utformar Azure-arkitekturen för en SharePoint-servergrupp konfigurerar du identiska serverroller som en del av en tillgänglighetsuppsättning.</span><span class="sxs-lookup"><span data-stu-id="7f130-228">When you design the Azure architecture for a SharePoint farm, configure identical server roles to be part of an availability set.</span></span> <span data-ttu-id="7f130-229">Det säkerställer att dina virtuella datorer är utspridda över flera feldomäner.</span><span class="sxs-lookup"><span data-stu-id="7f130-229">This ensures that your virtual machines are spread across multiple fault domains.</span></span>
  
<span data-ttu-id="7f130-230">**Bild 5: Använd Azure-tillgänglighetsuppsättningar för att ge hög tillgänglighet för SharePoint-servergruppsnivån**</span><span class="sxs-lookup"><span data-stu-id="7f130-230">**Figure 5: Use Azure Availability Sets to provide high availability for the SharePoint farm tiers**</span></span>

![Konfiguration av tillgänglighetsuppsättningar i Azure-infrastrukturen för en SharePoint 2013-lösning](../media/AZenv-WinAzureAvailSetsHA.png)
  
<span data-ttu-id="7f130-232">Det här diagrammet beskriver konfiguration av tillgänglighetsuppsättningar i Azure-infrastrukturen.</span><span class="sxs-lookup"><span data-stu-id="7f130-232">This diagram calls out the configuration of availability sets within the Azure infrastructure.</span></span> <span data-ttu-id="7f130-233">Var och en av följande roller har en separat tillgänglighetsuppsättning:</span><span class="sxs-lookup"><span data-stu-id="7f130-233">Each of the following roles share a separate availability set:</span></span>
  
- <span data-ttu-id="7f130-234">Active Directory och DNS</span><span class="sxs-lookup"><span data-stu-id="7f130-234">Active Directory and DNS</span></span>
    
- <span data-ttu-id="7f130-235">Databas</span><span class="sxs-lookup"><span data-stu-id="7f130-235">Database</span></span>
    
- <span data-ttu-id="7f130-236">Backend</span><span class="sxs-lookup"><span data-stu-id="7f130-236">Back end</span></span>
    
- <span data-ttu-id="7f130-237">Distribuera cache</span><span class="sxs-lookup"><span data-stu-id="7f130-237">Distribute cache</span></span>
    
- <span data-ttu-id="7f130-238">Frontend</span><span class="sxs-lookup"><span data-stu-id="7f130-238">Front end</span></span>
    
<span data-ttu-id="7f130-239">SharePoint-servergruppen kan behöva finjusteras på Azure-plattformen.</span><span class="sxs-lookup"><span data-stu-id="7f130-239">The SharePoint farm might need to be fine tuned in the Azure platform.</span></span> <span data-ttu-id="7f130-240">För att säkerställa hög tillgänglighet för alla komponenter, se till att alla serverroller är konfigurerade identiskt.</span><span class="sxs-lookup"><span data-stu-id="7f130-240">To ensure high availability of all components, ensure that the server roles are all configured identically.</span></span>
  
<span data-ttu-id="7f130-241">Här är ett exempel som visar en standardarkitektur för Internetwebbplatser som uppfyller specifika kapacitets- och prestandamål.</span><span class="sxs-lookup"><span data-stu-id="7f130-241">Here is an example that shows a standard Internet Sites architecture that meets specific capacity and performance goals.</span></span> <span data-ttu-id="7f130-242">Det här exemplet presenteras i följande arkitekturmodell: [Sökarkitekturer för Internetwebbplatser för SharePoint Server 2013.](https://go.microsoft.com/fwlink/p/?LinkId=261519)</span><span class="sxs-lookup"><span data-stu-id="7f130-242">This example is featured in the following architecture model: [Internet Sites Search Architectures for SharePoint Server 2013](https://go.microsoft.com/fwlink/p/?LinkId=261519).</span></span>
  
<span data-ttu-id="7f130-243">**Bild 6: Exempel på planering för kapacitets- och prestandamål i en servergrupp på tre nivåer**</span><span class="sxs-lookup"><span data-stu-id="7f130-243">**Figure 6: Planning example for capacity and performance goals in a three-tier farm**</span></span>

![Standardarkitektur för SharePoint 2013-webbplatser med komponenttilldelningar som uppfyller specifika kapacitets- och prestandamål](../media/AZarch-CapPerfexmpArch.png)
  
<span data-ttu-id="7f130-245">I det här diagrammet:</span><span class="sxs-lookup"><span data-stu-id="7f130-245">In this diagram:</span></span>
  
- <span data-ttu-id="7f130-246">En servergrupp på tre nivåer representeras: webbservrar, programservrar och databasservrar.</span><span class="sxs-lookup"><span data-stu-id="7f130-246">A three-tier farm is represented: web servers, application servers, and database servers.</span></span>
    
- <span data-ttu-id="7f130-247">De tre webbservrarna är konfigurerade identiskt med flera komponenter.</span><span class="sxs-lookup"><span data-stu-id="7f130-247">The three web servers are configured identically with multiple components.</span></span>
    
- <span data-ttu-id="7f130-248">De två databasservrarna är konfigurerade identiskt.</span><span class="sxs-lookup"><span data-stu-id="7f130-248">The two database servers are configured identically.</span></span>
    
- <span data-ttu-id="7f130-249">De tre programservrarna är inte konfigurerade identiskt.</span><span class="sxs-lookup"><span data-stu-id="7f130-249">The three application servers are not configured identically.</span></span> <span data-ttu-id="7f130-250">De här serverrollerna kräver finjustering för tillgänglighetsuppsättningar i Azure.</span><span class="sxs-lookup"><span data-stu-id="7f130-250">These server roles require fine tuning for availability sets in Azure.</span></span>
    
<span data-ttu-id="7f130-251">Vi tittar närmare på programservernivån.</span><span class="sxs-lookup"><span data-stu-id="7f130-251">Let's look closer at the application server tier.</span></span>
  
<span data-ttu-id="7f130-252">**Bild 7: Programservernivån innan du finslipar**</span><span class="sxs-lookup"><span data-stu-id="7f130-252">**Figure 7: Application server tier before fine tuning**</span></span>

![Exempel på SharePoint Server 2013-programservernivå innan du ställer in tillgänglighetsuppsättningar för Microsoft Azure](../media/AZarch-AppServtierBefore.png)
  
<span data-ttu-id="7f130-254">I det här diagrammet:</span><span class="sxs-lookup"><span data-stu-id="7f130-254">In this diagram:</span></span>
  
- <span data-ttu-id="7f130-255">Tre servrar ingår i programnivån.</span><span class="sxs-lookup"><span data-stu-id="7f130-255">Three servers are included in the application tier.</span></span>
    
- <span data-ttu-id="7f130-256">Den första servern innehåller fyra komponenter.</span><span class="sxs-lookup"><span data-stu-id="7f130-256">The first server includes four components.</span></span>
    
- <span data-ttu-id="7f130-257">Den andra servern innehåller tre komponenter.</span><span class="sxs-lookup"><span data-stu-id="7f130-257">The second server includes three components.</span></span>
    
- <span data-ttu-id="7f130-258">Den tredje servern består av två komponenter.</span><span class="sxs-lookup"><span data-stu-id="7f130-258">The third server includes two components.</span></span>
    
<span data-ttu-id="7f130-259">Du fastställer antalet komponenter genom prestanda- och kapacitetsmålen för servergruppen.</span><span class="sxs-lookup"><span data-stu-id="7f130-259">You determine the number of components by the performance and capacity targets for the farm.</span></span> <span data-ttu-id="7f130-260">För att anpassa den här arkitekturen för Azure replikerar vi de fyra komponenterna över alla tre servrarna.</span><span class="sxs-lookup"><span data-stu-id="7f130-260">To adapt this architecture for Azure, we'll replicate the four components across all three servers.</span></span> <span data-ttu-id="7f130-261">Då ökar antalet komponenter utöver vad som krävs för prestanda och kapacitet.</span><span class="sxs-lookup"><span data-stu-id="7f130-261">This increases the number of components beyond what is necessary for performance and capacity.</span></span> <span data-ttu-id="7f130-262">Kompromissen är att den här designen säkerställer hög tillgänglighet för alla fyra komponenterna i Azure-plattformen när dessa tre virtuella maskiner tilldelas till en tillgänglighetsuppsättning.</span><span class="sxs-lookup"><span data-stu-id="7f130-262">The tradeoff is that this design ensures high availability of all four components in the Azure platform when these three virtual machines are assigned to an availability set.</span></span>
  
<span data-ttu-id="7f130-263">**Bild 8: Programservernivån efter finjustering**</span><span class="sxs-lookup"><span data-stu-id="7f130-263">**Figure 8: Application server tier after fine tuning**</span></span>

![Exempel på SharePoint Server 2013-programservernivå efter justering av tillgänglighetsuppsättningar för Microsoft Azure](../media/AZarch-AppServtierAfter.png)
  
<span data-ttu-id="7f130-265">I diagrammet visas alla tre programservrar som konfigurerats identiskt med samma fyra komponenter.</span><span class="sxs-lookup"><span data-stu-id="7f130-265">This diagram shows all three application servers configured identically with the same four components.</span></span>
  
<span data-ttu-id="7f130-266">När vi lägger till tillgänglighetsuppsättningar för nivåerna för SharePoint-servergruppen är implementeringen klar.</span><span class="sxs-lookup"><span data-stu-id="7f130-266">When we add availability sets to the tiers of the SharePoint farm, the implementation is complete.</span></span>
  
<span data-ttu-id="7f130-267">**Bild 9: Den slutförda SharePoint-servergruppen i Azure-infrastrukturtjänster**</span><span class="sxs-lookup"><span data-stu-id="7f130-267">**Figure 9: The completed SharePoint farm in Azure infrastructure services**</span></span>

![Exempel på SharePoint 2013-servergrupp i Azure-infrastrukturtjänster med virtuella nätverk, tvärlokala anslutningar, undernät, virtuella maskiner och tillgänglighetsuppsättningar](../media/7256292f-bf11-485b-8917-41ba206153ee.png)
  
<span data-ttu-id="7f130-269">Det här diagrammet visar SharePoint-servergruppen som implementeras i Azure-infrastrukturtjänster, med tillgänglighetsuppsättningar för att tillhandahålla feldomäner för servrarna på varje nivå.</span><span class="sxs-lookup"><span data-stu-id="7f130-269">This diagram shows the SharePoint farm implemented in Azure infrastructure services, with availability sets to provide fault domains for the servers in each tier.</span></span>
  
## <a name="see-also"></a><span data-ttu-id="7f130-270">Se även</span><span class="sxs-lookup"><span data-stu-id="7f130-270">See Also</span></span>

[<span data-ttu-id="7f130-271">Microsoft 365-lösning och arkitekturcenter</span><span class="sxs-lookup"><span data-stu-id="7f130-271">Microsoft 365 solution and architecture center</span></span>](../solutions/index.yml)
  
[<span data-ttu-id="7f130-272">Internetwebbplatser i Microsoft Azure med SharePoint Server 2013</span><span class="sxs-lookup"><span data-stu-id="7f130-272">Internet Sites in Microsoft Azure using SharePoint Server 2013</span></span>](internet-sites-in-microsoft-azure-using-sharepoint-server-2013.md)
  
[<span data-ttu-id="7f130-273">SharePoint Server 2013 katastrofåterställning i Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="7f130-273">SharePoint Server 2013 Disaster Recovery in Microsoft Azure</span></span>](sharepoint-server-2013-disaster-recovery-in-microsoft-azure.md)