---
title: Använda e-postflödes regler för att blockera meddelanden med körbara filer
f1.keywords:
- NOCSH
ms.author: chrisda
author: chrisda
manager: dansimp
ms.date: ''
audience: ITPro
ms.topic: how-to
ms.service: O365-seccomp
localization_priority: Normal
ms.assetid: c4fb4a86-b772-49d0-8773-e8ee897e175d
ms.custom:
- seo-marvel-apr2020
description: Administratörer kan lära dig hur du skapar regler för e-postflöden (transport regler) för att blockera meddelanden som innehåller bifogade filer.
ms.openlocfilehash: 95c92268bb27ecc1b4938a25143b14289db070af
ms.sourcegitcommit: 0a8b0186cc041db7341e57f375d0d010b7682b7d
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 12/11/2020
ms.locfileid: "49659245"
---
# <a name="use-mail-flow-rules-to-block-messages-with-executable-attachments-in-eop"></a>Använda e-postflödesregler för att blockera meddelanden med körbara bifogade filer i EOP

[!INCLUDE [Microsoft 365 Defender rebranding](../includes/microsoft-defender-for-office.md)]


I Microsoft 365-organisationer med post lådor i Exchange Online eller fristående Exchange Online Protection (EOP)-organisationer utan Exchange Online-postlådor används principer för skadlig program vara för att blockera skadliga meddelanden, inklusive meddelanden med körbara filer. Mer information finns i [skydda mot skadlig program vara i EOP](anti-malware-protection.md).

För att förbättra skyddet kan du använda regler för e-postflöde (kallas även transport regler) för att identifiera och blockera meddelanden som innehåller körbara filer enligt beskrivningen i den här artikeln.

Om du till exempel följer ett utbrott av skadlig kod kan ett företag tillämpa denna regel med en tids gräns så att berörda användare kan komma tillbaka till att skicka bilagor efter en viss tids period.

## <a name="what-do-you-need-to-know-before-you-begin"></a>Vad behöver jag veta innan jag börjar?

- Du måste tilldelas behörigheter i Exchange Online eller Exchange Online Protection innan du kan göra det i den här artikeln. Specifikt behöver du **Transport regel** rollen, som är tilldelad till roll grupperna **organisations hantering**, **regelefterlevnad** och hantering av **Arkiv handlingar** .

  Mer information finns i följande avsnitt:

  - [Behörigheter i Exchange Online](https://docs.microsoft.com/exchange/permissions-exo/permissions-exo)
  - [Behörigheter i fristående EOP](feature-permissions-in-eop.md)
  - [Använda UK ändra listan över medlemmar i roll grupper](manage-admin-role-group-permissions-in-eop.md#use-the-eac-modify-the-list-of-members-in-role-groups)

- Om du vill öppna UK i Exchange Online läser du [administrations Center för Exchange i Exchange Online](https://docs.microsoft.com/Exchange/exchange-admin-center). Information om hur du öppnar UK i fristående EOP finns i [administrations Center för Exchange i fristående EOP](exchange-admin-center-in-exchange-online-protection-eop.md).

- Information om hur du använder Windows PowerShell för att ansluta till Exchange Online finns i artikeln om att [ansluta till Exchange Online PowerShell](https://docs.microsoft.com/powershell/exchange/connect-to-exchange-online-powershell). Information om hur du ansluter till fristående EOP PowerShell finns i [Anslut till Exchange Online Protection PowerShell](https://docs.microsoft.com/powershell/exchange/connect-to-exchange-online-protection-powershell).

- Mer information om regler för e-postflöden i Exchange Online och fristående EOP finns i följande avsnitt:

  - [Regler för e-postflöde (transport regler) i Exchange Online](https://docs.microsoft.com/Exchange/security-and-compliance/mail-flow-rules/mail-flow-rules)

  - [Villkor och undantag för e-postflödes regel (predikat) i Exchange Online](https://docs.microsoft.com/Exchange/security-and-compliance/mail-flow-rules/conditions-and-exceptions)

  - [Åtgärder för e-postflödes regler i Exchange Online](https://docs.microsoft.com/Exchange/security-and-compliance/mail-flow-rules/mail-flow-rule-actions)

## <a name="use-the-eac-to-create-a-rule-that-blocks-messages-with-executable-attachments"></a>Använda UK för att skapa en regel som blockerar meddelanden med körbara filer

1. Gå till regler för **e-postflöde** i UK \> .

2. Klicka på **Lägg** till ![ ikonen Lägg till ](../../media/ITPro-EAC-AddIcon.png) och välj sedan **skapa en ny regel**.

3. På sidan **ny regel** som öppnas konfigurerar du följande inställningar:

   - **Namn**: Ange ett unikt, beskrivande namn för regeln.

   - Klicka på **fler alternativ**.

   - **Använd den här regeln om**: Välj **bifogad fil** \> **har körbart innehåll**.

   - **Gör följande**: Välj **blockera meddelandet** och välj sedan önskad åtgärd:

     - **avvisa meddelandet och ta med en förklaring**: Ange den text du vill ska visas i rapporten om ej leverans (kallas även för en NDR eller ett studs meddelande) i dialog rutan **Ange avslag** . Standard koden för förbättrad utökad status är 5.7.1.

     - **avvisa meddelandet med utökad status kod** i dialog rutan **Ange förbättrad status kod** som visas, och ange den utökade status kod som du vill ska visas i rapporten. Giltiga värden är 5.7.1 eller ett värde från 5.7.900 till 5.7.999. Avvisnings texten är inte godkänd, meddelandet nekades.

     - **avvisa meddelandet utan att meddela någon**

4. Klicka på **Spara** när du är klar. Regeln för att blockera bifogade filer är i kraft.

## <a name="use-powershell-to-create-a-rule-that-blocks-messages-with-executable-attachments"></a>Använda PowerShell för att skapa en regel som blockerar meddelanden med körbara filer

Använd följande syntax för att skapa en regel som blockerar meddelanden som innehåller körbara filer:

```powershell
New-TransportRule -Name "<UniqueName>" -AttachmentHasExecutableContent $true [-RejectMessageEnhancedStatusCode <5.7.1 | 5.7.900 to 5.7.999>] [-RejectMessageReasonText "<Text>"] [-DeleteMessage $true]
```

**Anmärkningar**:

- Om du använder parametern _RejectMessageEnhancedStatusCode_ utan parametern _RejectMessageReasonText_ är standard texten: leverans inte godkänd, meddelandet nekades.

- Om du använder parametern _RejectMessageReasonText_ utan parametern _RejectMessageEnhancedStatusCode_ är standard koden 5.7.1.

I det här exemplet skapas en ny regel med namnet blockera körbara bilagor som tyst tar bort meddelanden som innehåller körbara filer.

```powershell
New-TransportRule -Name "Block Executable Attachments" -AttachmentHasExecutableContent $true -DeleteMessage $true
```

Detaljerad information om syntax och parametrar finns i [New-TransportRule](https://docs.microsoft.com/powershell/module/exchange/new-transportrule).

## <a name="how-do-you-know-this-worked"></a>Hur vet du att det fungerade?

Om du vill kontrol lera att du har skapat en regel för e-postflöde för att blockera meddelanden som innehåller bifogade filer gör du något av följande:

- Gå till regler för **e-postflöde** i UK och \>  \> Välj regeln \> Klicka på **Redigera** ![ redigerings ikon ](../../media/ITPro-EAC-EditIcon.png) och kontrol lera inställningarna.

- I PowerShell kör du följande kommando för att kontrol lera inställningarna:

  ```powershell
  Get-TransportRule -Identity "<Rule Name>" | Format-List Name,AttachmentHasExecutableContent,RejectMessage*,DeleteMessage
  ```
