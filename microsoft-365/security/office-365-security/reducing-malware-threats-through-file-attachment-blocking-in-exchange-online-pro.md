---
title: Använda regler för e-postflöde för att blockera meddelanden med körbara bilagor
f1.keywords:
- NOCSH
ms.author: chrisda
author: chrisda
manager: dansimp
ms.date: ''
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
ms.assetid: c4fb4a86-b772-49d0-8773-e8ee897e175d
ms.custom:
- seo-marvel-apr2020
description: Administratörer kan lära sig hur du skapar regler för e-postflöde (transportregler) för att blockera meddelanden som innehåller körbara bilagor.
ms.openlocfilehash: 4f25af9dc6595201c98a9e89875772bc7192d9dc
ms.sourcegitcommit: 40ec697e27b6c9a78f2b679c6f5a8875dacde943
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 05/23/2020
ms.locfileid: "44351001"
---
# <a name="use-mail-flow-rules-to-block-messages-with-executable-attachments-in-eop"></a>Använda e-postflödesregler för att blockera meddelanden med körbara bifogade filer i EOP

I Microsoft 365-organisationer med postlådor i Exchange Online eller fristående EOP-organisationer (Exchange Online Protection) utan Exchange Online-postlådor använder EOP policyer mot skadlig kod för att blockera skadliga meddelanden, inklusive meddelanden med körbara bilagor. Mer information finns [i Skydd mot skadlig kod i EOP](anti-malware-protection.md).

Om du vill förbättra skyddet ytterligare kan du använda regler för e-postflöde (kallas även transportregler) för att identifiera och blockera meddelanden som innehåller körbara bilagor enligt beskrivningen i det här avsnittet.

Efter ett utbrott av skadlig programvara kan ett företag till exempel tillämpa den här regeln med en tidsgräns så att berörda användare kan återgå till att skicka bilagor efter en angiven tidsperiod.

## <a name="what-do-you-need-to-know-before-you-begin"></a>Vad behöver jag veta innan jag börjar?

- Du måste tilldelas behörigheter innan du kan göra följande:

  - I Exchange Online läser du posten "E-postflöde" i [Funktionsbehörigheter i Exchange Online](https://docs.microsoft.com/Exchange/permissions-exo/feature-permissions).
  
  - I fristående EOP behöver du rollen Transportregler, som tilldelas rollerna OrganizationManagement, ComplianceManagement och RecordsManagement som standard. Mer information finns [i Behörigheter i fristående EOP](feature-permissions-in-eop.md) och [Använd EAC ändra listan över medlemmar i rollgrupper](manage-admin-role-group-permissions-in-eop.md#use-the-eac-modify-the-list-of-members-in-role-groups).

- Information om hur du öppnar EAC i Exchange Online finns [i Administrationscenter för Exchange i Exchange Online](https://docs.microsoft.com/Exchange/exchange-admin-center). Om du vill öppna EAC i fristående EOP finns [i Exchange admin center i fristående EOP](exchange-admin-center-in-exchange-online-protection-eop.md).

- Information om hur du använder Windows PowerShell för att ansluta till Exchange Online finns i artikeln om att [ansluta till Exchange Online PowerShell](https://docs.microsoft.com/powershell/exchange/exchange-online/connect-to-exchange-online-powershell/connect-to-exchange-online-powershell). Information om hur du ansluter till fristående EOP PowerShell finns i artikeln om att [Ansluta till Exchange Online Protection PowerShell](https://docs.microsoft.com/powershell/exchange/exchange-eop/connect-to-exchange-online-protection-powershell).

- Mer information om regler för e-postflöde i Exchange Online och fristående EOP finns i följande avsnitt:

  - [Regler för e-postflöde (transportregler) i Exchange Online](https://docs.microsoft.com/Exchange/security-and-compliance/mail-flow-rules/mail-flow-rules)

  - [Villkor och undantag för e-postflödesregel (predikat) i Exchange Online](https://docs.microsoft.com/Exchange/security-and-compliance/mail-flow-rules/conditions-and-exceptions)

  - [Regelåtgärder för e-postflöde i Exchange Online](https://docs.microsoft.com/Exchange/security-and-compliance/mail-flow-rules/mail-flow-rule-actions)

## <a name="use-the-eac-to-create-a-rule-that-blocks-messages-with-executable-attachments"></a>Använd EAC för att skapa en regel som blockerar meddelanden med körbara bilagor

1. Gå till Regler för **e-postflöde** i EAC \> **Rules**.

2. Klicka på **Ikonen Lägg till** och välj sedan Skapa en ny ![ ](../../media/ITPro-EAC-AddIcon.png) **regel**.

3. Konfigurera följande inställningar på sidan **Ny regel** som öppnas:

   - **Namn**: Ange ett unikt, beskrivande namn för regeln.

   - Klicka på **Fler alternativ**.

   - **Använd den här regeln om**: Välj En **bifogad fil** har \> **körbart innehåll**.

   - **Gör följande:** Välj **Blockera meddelandet** och välj sedan den åtgärd du vill ha:

     - **avvisa meddelandet och inkludera en förklaring**: I dialogrutan Ange **avvisningsorsak** som visas anger du den text som du vill ska visas i rapporten om utebliven leverans (kallas även NDR eller avvisningsmeddelande). Standardkoden för utökad status som används är 5.7.1.

     - **avvisa meddelandet med den utökade statuskoden**för : Ange den utökade **statuskoddialogrutan i Ange utökad statuskod** som visas och ange den utökade statuskoden som du vill ska visas i NDR. Giltiga värden är 5.7.1 eller ett värde från 5.7.900 till 5.7.999. Standardavvisningstexten är: Leverans ej auktoriserad, meddelandet nekades.

     - **avvisa meddelandet utan att meddela någon**

4. Klicka på **Spara** när du är klar. Blockeringsregeln för bifogade filer är nu i kraft.

## <a name="use-powershell-to-create-a-rule-that-blocks-messages-with-executable-attachments"></a>Använda PowerShell för att skapa en regel som blockerar meddelanden med körbara bilagor

Använd följande syntax för att skapa en regel för att blockera meddelanden som innehåller körbara bilagor:

```powershell
New-TransportRule -Name "<UniqueName>" -AttachmentHasExecutableContent $true [-RejectMessageEnhancedStatusCode <5.7.1 | 5.7.900 to 5.7.999>] [-RejectMessageReasonText "<Text>"] [-DeleteMessage $true]
```

**Anmärkningar**:

- Om du använder parametern _RejectMessageEnhancedStatusCode_ utan parametern _RejectMessageReasonText_ är standardtexten: Leverans ej auktoriserad, meddelandet nekades.

- Om du använder parametern _RejectMessageReasonText_ utan parametern _RejectMessageEnhancedStatusCode_ är standardkoden 5.7.1.

I det här exemplet skapas en ny regel med namnet Blockera körbara bifogade filer som tyst tar bort meddelanden som innehåller körbara bilagor.

```powershell
New-TransportRule -Name "Block Executable Attachments" -AttachmentHasExecutableContent $true -DeleteMessage $true
```

Detaljerad information om syntax och parametrar finns i [New-TransportRule](https://docs.microsoft.com/powershell/module/exchange/new-transportrule).

## <a name="how-do-you-know-this-worked"></a>Hur vet du att det fungerade?

Så här kontrollerar du att du har skapat en regel för e-postflöde för att blockera meddelanden som innehåller körbara bilagor:

- Gå till **EAC-regler** för att skicka till \> **E-postflödesregler** \> och markera regeln klicka på \> **Redigera** ![ redigera ikon och kontrollera ](../../media/ITPro-EAC-EditIcon.png) inställningarna.

- I PowerShell kör du följande kommando för att verifiera inställningarna:

  ```powershell
  Get-TransportRule -Identity "<Rule Name>" | Format-List Name,AttachmentHasExecutableContent,RejectMessage*,DeleteMessage
  ```
