---
title: Referens till sårbarhetsskydd
keywords: minskningar, sårbarheter, sårbarheter, minskningar, sårbarheter, sårbarheter, emet
description: Information om hur sårbarhetsskyddsfunktionen fungerar i Windows 10
search.product: eADQiWindows 10XVcnh
ms.pagetype: security
ms.prod: m365-security
ms.mktglfcycl: manage
ms.sitesec: library
localization_priority: Normal
audience: ITPro
author: denisebmsft
ms.author: deniseb
ms.date: 01/06/2021
ms.reviewer: cjacks
manager: dansimp
ms.custom: asr
ms.technology: mde
ms.openlocfilehash: b224b32e26435e2612ec00c8c4544b4c3cff4344
ms.sourcegitcommit: 956176ed7c8b8427fdc655abcd1709d86da9447e
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 03/23/2021
ms.locfileid: "51072226"
---
# <a name="exploit-protection-reference"></a><span data-ttu-id="7aa52-104">Sårbarhetsskyddsreferens</span><span class="sxs-lookup"><span data-stu-id="7aa52-104">Exploit Protection Reference</span></span>

[!INCLUDE [Microsoft 365 Defender rebranding](../../includes/microsoft-defender.md)]


<span data-ttu-id="7aa52-105">**Gäller för:**</span><span class="sxs-lookup"><span data-stu-id="7aa52-105">**Applies to:**</span></span>
- [<span data-ttu-id="7aa52-106">Microsoft Defender för Endpoint</span><span class="sxs-lookup"><span data-stu-id="7aa52-106">Microsoft Defender for Endpoint</span></span>](https://go.microsoft.com/fwlink/?linkid=2154037)
- [<span data-ttu-id="7aa52-107">Microsoft 365 Defender</span><span class="sxs-lookup"><span data-stu-id="7aa52-107">Microsoft 365 Defender</span></span>](https://go.microsoft.com/fwlink/?linkid=2118804)

><span data-ttu-id="7aa52-108">Vill du uppleva Microsoft Defender för Slutpunkt?</span><span class="sxs-lookup"><span data-stu-id="7aa52-108">Want to experience Microsoft Defender for Endpoint?</span></span> [<span data-ttu-id="7aa52-109">Registrera dig för en kostnadsfri utvärderingsversion.</span><span class="sxs-lookup"><span data-stu-id="7aa52-109">Sign up for a free trial.</span></span>](https://www.microsoft.com/microsoft-365/windows/microsoft-defender-atp?ocid=docs-wdatp-enablesiem-abovefoldlink)

<span data-ttu-id="7aa52-110">Sårbarhetsskydd ger avancerat skydd för program som IT-proffs kan använda efter att utvecklaren har kompilerat och distribuerat programvaran.</span><span class="sxs-lookup"><span data-stu-id="7aa52-110">Exploit protection provides advanced protections for applications that the IT Pro can apply after the developer has compiled and distributed the software.</span></span>

<span data-ttu-id="7aa52-111">Den här artikeln hjälper dig att förstå hur sårbarhetsskydd fungerar, både på principnivå och på enskild minskningsnivå, så att du kan skapa och tillämpa sårbarhetsskyddsprinciper.</span><span class="sxs-lookup"><span data-stu-id="7aa52-111">This article helps you understand how exploit protection works, both at the policy level and at the individual mitigation level, to help you successfully build and apply Exploit Protection policies.</span></span>

## <a name="how-mitigations-are-applied"></a><span data-ttu-id="7aa52-112">Hur minskningar tillämpas</span><span class="sxs-lookup"><span data-stu-id="7aa52-112">How mitigations are applied</span></span>

<span data-ttu-id="7aa52-113">Minskningar av sårbarhetsskydd tillämpas per program.</span><span class="sxs-lookup"><span data-stu-id="7aa52-113">Exploit Protection mitigations are applied per application.</span></span>

<span data-ttu-id="7aa52-114">Åtgärder konfigureras via en registerpost för varje program som du konfigurerar skydd för.</span><span class="sxs-lookup"><span data-stu-id="7aa52-114">Mitigations are configured via a registry entry for each program that you configure protections for.</span></span> <span data-ttu-id="7aa52-115">De här inställningarna **lagras** i registerposten Minskningsalternativ för varje program \*\*(HKEY_LOCAL_MACHINE\ PROGRAMVARA\Microsoft\Windows NT\CurrentVersion\Image File Execution \*Options\ImageFileName\MitigationOptions\*\*\*).</span><span class="sxs-lookup"><span data-stu-id="7aa52-115">These settings are stored in the **MitigationOptions** registry entry for each program (**HKEY_LOCAL_MACHINE \ SOFTWARE \ Microsoft \ Windows NT \ CurrentVersion \ Image File Execution Options \ *ImageFileName* \ MitigationOptions**).</span></span> <span data-ttu-id="7aa52-116">De börjar gälla när du startar om programmet och gäller tills du ändrar dem och startar om programmet igen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-116">They take effect when you restart the program and remain effective until you change them and restart the program again.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7aa52-117">Med Alternativ för filkörning kan du bara ange ett filnamn eller en sökväg, och inte ett versionsnummer, en arkitektur eller någon annan typ av information.</span><span class="sxs-lookup"><span data-stu-id="7aa52-117">Image File Execution Options only allows you to specify a file name or path, and not a version number, architecture, or any other differentiator.</span></span> <span data-ttu-id="7aa52-118">Var noga med att rikta åtgärder till program som har unika namn eller sökvägar, och använd dem bara på enheter där du har testat den versionen och den arkitekturen för programmet.</span><span class="sxs-lookup"><span data-stu-id="7aa52-118">Be careful to target mitigations to apps which have unique names or paths, applying them only on devices where you have tested that version and that architecture of the application.</span></span>

<span data-ttu-id="7aa52-119">Om du konfigurerar minskningar av sårbarhetsskydd med hjälp av en XML-konfigurationsfil, antingen via PowerShell, Grupprincip eller MDM, kommer enskilda registerinställningar att konfigureras åt dig när den här XML-konfigurationsfilen bearbetas.</span><span class="sxs-lookup"><span data-stu-id="7aa52-119">If you configure exploit protection mitigations using an XML configuration file, either via PowerShell, Group Policy, or MDM, when processing this XML configuration file, individual registry settings will be configured for you.</span></span>

<span data-ttu-id="7aa52-120">När principen som distribuerar XML-filen inte längre tillämpas tas inte inställningar som distribueras av den här XML-konfigurationsfilen bort automatiskt.</span><span class="sxs-lookup"><span data-stu-id="7aa52-120">When the policy distributing the XML file is no longer enforced, settings deployed by this XML configuration file will not be automatically removed.</span></span> <span data-ttu-id="7aa52-121">För att ta bort sårbarhetsskyddsinställningar exporterar du XML-konfigurationen från en ren Windows 10-enhet och distribuerar den här nya XML-filen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-121">To remove Exploit Protection settings, export the XML configuration from a clean Windows 10 device, and deploy this new XML file.</span></span> <span data-ttu-id="7aa52-122">Alternativt tillhandahåller Microsoft en XML-fil som en del av Windows säkerhetsbaslinjer för återställning av inställningarna för sårbarhetsskydd.</span><span class="sxs-lookup"><span data-stu-id="7aa52-122">Alternately, Microsoft provides an XML file as part of the Windows Security Baselines for resetting Exploit Protection settings.</span></span>

<span data-ttu-id="7aa52-123">Om du vill återställa inställningarna för sårbarhetsskydd med hjälp av PowerShell kan du använda följande kommando:</span><span class="sxs-lookup"><span data-stu-id="7aa52-123">To reset exploit protection settings using PowerShell, you could use the following command:</span></span>

```powershell
Set-ProcessMitigation -PolicyFilePath EP-reset.xml
```
<span data-ttu-id="7aa52-124">Här följer EP-reset.xml distribueras med Windows säkerhetsbaslinjer:</span><span class="sxs-lookup"><span data-stu-id="7aa52-124">Following is the EP-reset.xml distributed with the Windows Security Baselines:</span></span>
```xml
<?xml version="1.0" encoding="UTF-8"?>
<MitigationPolicy>
  <AppConfig Executable="ONEDRIVE.EXE">
    <DEP OverrideDEP="false" />
    <ASLR OverrideRelocateImages="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
    <ImageLoad OverrideBlockRemoteImages="false" />
  </AppConfig>
  <AppConfig Executable="firefox.exe">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
  </AppConfig>
  <AppConfig Executable="fltldr.exe">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
    <ImageLoad OverrideBlockRemoteImages="false" />
    <ChildProcess OverrideChildProcess="false" />
  </AppConfig>
  <AppConfig Executable="GROOVE.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
    <ImageLoad OverrideBlockRemoteImages="false" />
    <ChildProcess OverrideChildProcess="false" />
  </AppConfig>
  <AppConfig Executable="Acrobat.exe">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="AcroRd32.exe">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="chrome.exe">
    <DEP OverrideDEP="false" />
  </AppConfig>
  <AppConfig Executable="EXCEL.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="iexplore.exe">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="INFOPATH.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="java.exe">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="javaw.exe">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="javaws.exe">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="LYNC.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="MSACCESS.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="MSPUB.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="OIS.EXE">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="OUTLOOK.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="plugin-container.exe">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="POWERPNT.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="PPTVIEW.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="VISIO.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="VPREVIEW.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="WINWORD.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="wmplayer.exe">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="wordpad.exe">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
</MitigationPolicy>
```

## <a name="mitigation-reference"></a><span data-ttu-id="7aa52-125">Minskningsreferens</span><span class="sxs-lookup"><span data-stu-id="7aa52-125">Mitigation Reference</span></span>

<span data-ttu-id="7aa52-126">I följande avsnitt beskrivs de skydd som tillhandahålls av varje minskning av sårbarhetsskydd, kompatibilitetsöverväganden för minskningar och tillgängliga konfigurationsalternativ.</span><span class="sxs-lookup"><span data-stu-id="7aa52-126">The following sections detail the protections provided by each exploit protection mitigation, the compatibility considerations for the mitigation, and the configuration options available.</span></span>

## <a name="arbitrary-code-guard"></a><span data-ttu-id="7aa52-127">Godtyckligt kodskydd</span><span class="sxs-lookup"><span data-stu-id="7aa52-127">Arbitrary code guard</span></span>

### <a name="description"></a><span data-ttu-id="7aa52-128">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7aa52-128">Description</span></span>

<span data-ttu-id="7aa52-129">Godtycklig kodskydd skyddar mot en skadlig attack som läser in valfri kod i minnet via ett minneshål och möjlighet att köra koden.</span><span class="sxs-lookup"><span data-stu-id="7aa52-129">Arbitrary code guard helps protect against a malicious attacker loading the code of their choice into memory through a memory safety vulnerability and being able to execute that code.</span></span>

<span data-ttu-id="7aa52-130">Skydd mot godtycklig kod skyddar ett program från att köra dynamiskt genererad kod (kod som inte läses in, till exempel från själva exe eller en dll).</span><span class="sxs-lookup"><span data-stu-id="7aa52-130">Arbitrary code guard protects an application from executing dynamically generated code (code that is not loaded, for example, from the exe itself or a dll).</span></span> <span data-ttu-id="7aa52-131">Godtyckligt kodskydd fungerar genom att förhindra att minnet markeras som körbart.</span><span class="sxs-lookup"><span data-stu-id="7aa52-131">Arbitrary code guard works by preventing memory from being marked as executable.</span></span> <span data-ttu-id="7aa52-132">När ett program försöker [tilldela minne kontrollerar](https://docs.microsoft.com/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc)vi skyddsflaggor.</span><span class="sxs-lookup"><span data-stu-id="7aa52-132">When an application attempts to [allocate memory](https://docs.microsoft.com/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc), we check the protection flags.</span></span> <span data-ttu-id="7aa52-133">(Minnet kan tilldelas med flaggor för läsning, skrivning och/eller skydd.) Om tilldelningen försöker inkludera flaggan för att [*utföra*](https://docs.microsoft.com/windows/win32/memory/memory-protection-constants) skydd misslyckas minnestilldelningen och returnerar en felkod (som STATUS_DYNAMIC_CODE_BLOCKED).</span><span class="sxs-lookup"><span data-stu-id="7aa52-133">(Memory can be allocated with read, write, and/or execute protection flags.) If the allocation attempts to include the [*execute*](https://docs.microsoft.com/windows/win32/memory/memory-protection-constants) protection flag, then the memory allocation fails and returns an error code (STATUS_DYNAMIC_CODE_BLOCKED).</span></span> <span data-ttu-id="7aa52-134">På samma sätt misslyckas [behörighetsändringen](https://docs.microsoft.com/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) och returnerar en felkod [](https://docs.microsoft.com/windows/win32/memory/memory-protection-constants) (STATUS_DYNAMIC_CODE_BLOCKED) om ett program försöker ändra de minnesflaggor som redan har tilldelats och innehåller en STATUS_DYNAMIC_CODE_BLOCKED.</span><span class="sxs-lookup"><span data-stu-id="7aa52-134">Similarly, if an application attempts to [change the protection flags of memory](https://docs.microsoft.com/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) that has already been allocated and includes the [*execute*](https://docs.microsoft.com/windows/win32/memory/memory-protection-constants) protection flag, then the permission change fails and returns an error code (STATUS_DYNAMIC_CODE_BLOCKED).</span></span>

<span data-ttu-id="7aa52-135">Genom att *förhindra* att flaggan körs ställs in kan dataexekveringsskyddsfunktionen i Windows 10 skydda mot att instruktionspekaren ställs in på minnet och att koden körs.</span><span class="sxs-lookup"><span data-stu-id="7aa52-135">By preventing the *execute* flag from being set, the data execution prevention feature of Windows 10 can then protect against the instruction pointer being set to that memory and running that code.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="7aa52-136">Överväganden för kompatibilitet</span><span class="sxs-lookup"><span data-stu-id="7aa52-136">Compatibility considerations</span></span>

<span data-ttu-id="7aa52-137">Godtyckligt kodskydd förhindrar att du allokerar eventuellt minne som körbart, vilket ger ett kompatibilitetsproblem med metoder som JIT-kompilatorer (Just-in-Time).</span><span class="sxs-lookup"><span data-stu-id="7aa52-137">Arbitrary code guard prevents allocating any memory as executable, which presents a compatibility issue with approaches such as Just-in-Time (JIT) compilers.</span></span> <span data-ttu-id="7aa52-138">De flesta moderna webbläsare kompilerar till exempel JavaScript i inbyggd kod för att optimera prestanda.</span><span class="sxs-lookup"><span data-stu-id="7aa52-138">Most modern browsers, for example, will compile JavaScript into native code in order to optimize performance.</span></span> <span data-ttu-id="7aa52-139">För att stödja denna minskning måste de åtgärdas på nytt för att flytta JIT-kompileringen utanför den skyddade processen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-139">In order to support this mitigation, they will need to be rearchitected to move the JIT compilation outside of the protected process.</span></span> <span data-ttu-id="7aa52-140">Andra program vars design dynamiskt genererar kod från skript eller andra mellanliggande språk är på liknande sätt inkompatibla med den här begränsningen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-140">Other applications whose design dynamically generates code from scripts or other intermediate languages will be similarly incompatible with this mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="7aa52-141">Konfigurationsalternativ</span><span class="sxs-lookup"><span data-stu-id="7aa52-141">Configuration options</span></span>

<span data-ttu-id="7aa52-142">**Tillåt avanmälning av** tråd – Du kan konfigurera åtgärder så att en enskild tråd kan avanmäla sig från det här skyddet.</span><span class="sxs-lookup"><span data-stu-id="7aa52-142">**Allow thread opt-out** - You can configure the mitigation to allow an individual thread to opt-out of this protection.</span></span> <span data-ttu-id="7aa52-143">Utvecklaren måste ha skrivit in programmet med information om den här begränsningen och ha anropat [**API:t för SetThreadInformation**](https://docs.microsoft.com/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadinformation) med parametern *ThreadInformation* inställd på **ThreadDynamicCodePolicy** för att kunna köra dynamisk kod i den här tråden.</span><span class="sxs-lookup"><span data-stu-id="7aa52-143">The developer must have written the application with awareness of this mitigation, and have called the [**SetThreadInformation**](https://docs.microsoft.com/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadinformation) API with the *ThreadInformation* parameter set to **ThreadDynamicCodePolicy** in order to be allowed to execute dynamic code on this thread.</span></span>

<span data-ttu-id="7aa52-144">**Endast granskning** – Du kan aktivera den här begränsningen i granskningsläget för att mäta den potentiella kompatibilitets påverkan på ett program.</span><span class="sxs-lookup"><span data-stu-id="7aa52-144">**Audit only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="7aa52-145">Granskningshändelser kan sedan visas antingen i händelsevisaren eller med avancerad sökning i [Defender för slutpunkt.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="7aa52-145">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="block-low-integrity-images"></a><span data-ttu-id="7aa52-146">Blockera bilder med låg integritet</span><span class="sxs-lookup"><span data-stu-id="7aa52-146">Block low integrity images</span></span>

### <a name="description"></a><span data-ttu-id="7aa52-147">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7aa52-147">Description</span></span>

<span data-ttu-id="7aa52-148">Blockera bilder med låg integritet förhindrar att programmet läser in filer som inte är betrodda, oftast eftersom de har laddats ned från Internet från en webbläsare i begränsat läge.</span><span class="sxs-lookup"><span data-stu-id="7aa52-148">Block low integrity images prevents the application from loading files that are untrusted, typically because they have been downloaded from the internet from a sandboxed browser.</span></span>

<span data-ttu-id="7aa52-149">Den här begränsningen blockerar bildin läses in om bilden har en ACCESS-kontrollpost (ACE) som ger åtkomst till processer med låg IL och som inte har en betrodd etikett ACE.</span><span class="sxs-lookup"><span data-stu-id="7aa52-149">This mitigation will block image loads if the image has an Access Control Entry (ACE) which grants access to Low IL processes and which does not have a trust label ACE.</span></span> <span data-ttu-id="7aa52-150">Den implementeras av minneshanteraren, som blockerar filen från att mappas till minnet.</span><span class="sxs-lookup"><span data-stu-id="7aa52-150">It is implemented by the memory manager, which blocks the file from being mapped into memory.</span></span> <span data-ttu-id="7aa52-151">Om ett program försöker mappa en bild med låg integritet utlöser det STATUS_ACCESS_DENIED fel.</span><span class="sxs-lookup"><span data-stu-id="7aa52-151">If an application attempts to map a low integrity image, it will trigger a STATUS_ACCESS_DENIED error.</span></span> <span data-ttu-id="7aa52-152">Mer information om hur integritetsnivåer fungerar finns i [Obligatorisk integritetskontroll.](https://docs.microsoft.com/windows/win32/secauthz/mandatory-integrity-control)</span><span class="sxs-lookup"><span data-stu-id="7aa52-152">For details on how integrity levels work, see [Mandatory Integrity Control](https://docs.microsoft.com/windows/win32/secauthz/mandatory-integrity-control).</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="7aa52-153">Överväganden för kompatibilitet</span><span class="sxs-lookup"><span data-stu-id="7aa52-153">Compatibility considerations</span></span>

<span data-ttu-id="7aa52-154">Bilder med låg integritet hindrar programmet från att läsa in filer som har laddats ned från Internet.</span><span class="sxs-lookup"><span data-stu-id="7aa52-154">Block low integrity images will prevent the application from loading files that were downloaded from the internet.</span></span> <span data-ttu-id="7aa52-155">Om programarbetsflödet kräver inläsning av bilder som laddas ned bör du se till att de laddas ned från en process med högre förtroende eller uttryckligen har ometiketterats för att tillämpa den här begränsningen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-155">If your application workflow requires loading images that are downloaded, you will want to ensure that they are downloaded from a higher-trust process, or are explicitly relabeled in order to apply this mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="7aa52-156">Konfigurationsalternativ</span><span class="sxs-lookup"><span data-stu-id="7aa52-156">Configuration options</span></span>

<span data-ttu-id="7aa52-157">**Endast granskning** – Du kan aktivera den här begränsningen i granskningsläget för att mäta den potentiella kompatibilitets påverkan på ett program.</span><span class="sxs-lookup"><span data-stu-id="7aa52-157">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="7aa52-158">Granskningshändelser kan sedan visas i händelsevisaren eller använda Avancerad sökning i [Microsoft Defender för slutpunkt.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="7aa52-158">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="block-remote-images"></a><span data-ttu-id="7aa52-159">Blockera fjärrbilder</span><span class="sxs-lookup"><span data-stu-id="7aa52-159">Block remote images</span></span>

### <a name="description"></a><span data-ttu-id="7aa52-160">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7aa52-160">Description</span></span>

<span data-ttu-id="7aa52-161">Att blockera fjärrbilder hjälper till att förhindra att programmet läser in filer som finns på en fjärrenhet, till exempel en UNC-delning.</span><span class="sxs-lookup"><span data-stu-id="7aa52-161">Blocking remote images helps to prevent the application from loading files that are hosted on a remote device, such as a UNC share.</span></span> <span data-ttu-id="7aa52-162">Att blockera fjärrbilder skyddar mot inläsning av binärfiler i minne som finns på en extern enhet som kontrolleras av attackeraren.</span><span class="sxs-lookup"><span data-stu-id="7aa52-162">Blocking remote images helps protect against loading binaries into memory that are on an external device controlled by the attacker.</span></span>

<span data-ttu-id="7aa52-163">Den här begränsningen blockerar bildbelastningar om bilden bestäms på en fjärrenhet.</span><span class="sxs-lookup"><span data-stu-id="7aa52-163">This mitigation will block image loads if the image is determined to be on a remote device.</span></span> <span data-ttu-id="7aa52-164">Den implementeras av minneshanteraren, som blockerar filen från att mappas till minnet.</span><span class="sxs-lookup"><span data-stu-id="7aa52-164">It is implemented by the memory manager, which blocks the file from being mapped into memory.</span></span> <span data-ttu-id="7aa52-165">Om ett program försöker mappa en fjärrfil utlöses ett STATUS_ACCESS_DENIED fel.</span><span class="sxs-lookup"><span data-stu-id="7aa52-165">If an application attempts to map a remote file, it will trigger a STATUS_ACCESS_DENIED error.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="7aa52-166">Överväganden för kompatibilitet</span><span class="sxs-lookup"><span data-stu-id="7aa52-166">Compatibility considerations</span></span>

<span data-ttu-id="7aa52-167">Blockera fjärrbilder hindrar programmet från att läsa in bilder från fjärrenheter.</span><span class="sxs-lookup"><span data-stu-id="7aa52-167">Block remote images will prevent the application from loading images from remote devices.</span></span> <span data-ttu-id="7aa52-168">Om programmet läser in filer eller plugin-program från fjärrenheter är det inte kompatibelt med den här begränsningen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-168">If your application loads files or plug-ins from remote devices, then it will not be compatible with this mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="7aa52-169">Konfigurationsalternativ</span><span class="sxs-lookup"><span data-stu-id="7aa52-169">Configuration options</span></span>

<span data-ttu-id="7aa52-170">**Endast granskning** – Du kan aktivera den här begränsningen i granskningsläget för att mäta den potentiella kompatibilitets påverkan på ett program.</span><span class="sxs-lookup"><span data-stu-id="7aa52-170">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="7aa52-171">Granskningshändelser kan sedan visas i händelsevisaren eller använda Avancerad sökning i [Microsoft Defender för slutpunkt.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="7aa52-171">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="block-untrusted-fonts"></a><span data-ttu-id="7aa52-172">Blockera icke betrodda teckensnitt</span><span class="sxs-lookup"><span data-stu-id="7aa52-172">Block untrusted fonts</span></span>

### <a name="description"></a><span data-ttu-id="7aa52-173">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7aa52-173">Description</span></span>

<span data-ttu-id="7aa52-174">Blockera icke betrodda teckensnitt minskar risken för ett svagheter i teckensnitts parsningen som leder till att attackeraren kan köra kod på enheten.</span><span class="sxs-lookup"><span data-stu-id="7aa52-174">Block untrusted fonts mitigates the risk of a flaw in font parsing leading to the attacker being able to run code on the device.</span></span> <span data-ttu-id="7aa52-175">Endast teckensnitt som installeras i windows\fonts-katalogen läses in för bearbetning av GDI.</span><span class="sxs-lookup"><span data-stu-id="7aa52-175">Only fonts that are installed into the windows\fonts directory will be loaded for processing by GDI.</span></span>

<span data-ttu-id="7aa52-176">Den här begränsningen implementeras i GDI, som validerar filens plats.</span><span class="sxs-lookup"><span data-stu-id="7aa52-176">This mitigation is implemented within GDI, which validates the location of the file.</span></span> <span data-ttu-id="7aa52-177">Om filen inte finns i systemteckensnittskatalogen läses inte teckensnittet in för tolkning och anropet misslyckas.</span><span class="sxs-lookup"><span data-stu-id="7aa52-177">If the file is not in the system fonts directory, the font will not be loaded for parsing and that call will fail.</span></span>

<span data-ttu-id="7aa52-178">Den här begränsningen följer den inbyggda begränsningen i Windows 10 1607 och senare, som flyttar teckensnittsparsning från kerneln och till en appbehållare i användarläge.</span><span class="sxs-lookup"><span data-stu-id="7aa52-178">This mitigation is in addition to the built-in mitigation provided in Windows 10 1607 and later, which moves font parsing out of the kernel and into a user-mode app container.</span></span> <span data-ttu-id="7aa52-179">Sårbarheter baserade på teckensnitts parsing sker därför i begränsat och isolerat sammanhang, vilket minskar risken avsevärt.</span><span class="sxs-lookup"><span data-stu-id="7aa52-179">Any exploit based on font parsing, as a result, happens in a sandboxed and isolated context, which reduces the risk significantly.</span></span> <span data-ttu-id="7aa52-180">Mer information om den här begränsningen finns i bloggen Sårbarheter i [Windows 10](https://www.microsoft.com/security/blog/2017/01/13/hardening-windows-10-with-zero-day-exploit-mitigations/)utan dagar.</span><span class="sxs-lookup"><span data-stu-id="7aa52-180">For details on this mitigation, see the blog [Hardening Windows 10 with zero-day exploit mitigations](https://www.microsoft.com/security/blog/2017/01/13/hardening-windows-10-with-zero-day-exploit-mitigations/).</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="7aa52-181">Överväganden för kompatibilitet</span><span class="sxs-lookup"><span data-stu-id="7aa52-181">Compatibility considerations</span></span>

<span data-ttu-id="7aa52-182">Den vanligaste användningen av teckensnitt utanför systemkatalogen för teckensnitt är med [webbteckensnitt](https://docs.microsoft.com/typography/fonts/font-faq#web).</span><span class="sxs-lookup"><span data-stu-id="7aa52-182">The most common use of fonts outside of the system fonts directory is with [web fonts](https://docs.microsoft.com/typography/fonts/font-faq#web).</span></span> <span data-ttu-id="7aa52-183">Moderna webbläsare, till exempel Microsoft Edge, använder DirectWrite i stället för GDI och påverkas inte.</span><span class="sxs-lookup"><span data-stu-id="7aa52-183">Modern browsers, such as Microsoft Edge, use DirectWrite instead of GDI, and are not impacted.</span></span> <span data-ttu-id="7aa52-184">Äldre webbläsare, till exempel Internet Explorer 11 (och IE-läge i nya Microsoft Edge) kan dock påverkas, särskilt program som Office 365 som använder teckensnittsglyf för att visa användargränssnittet.</span><span class="sxs-lookup"><span data-stu-id="7aa52-184">However, legacy browsers, such as Internet Explorer 11 (and IE mode in the new Microsoft Edge) can be impacted, particularly with applications such as Office 365, which use font glyphs to display UI.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="7aa52-185">Konfigurationsalternativ</span><span class="sxs-lookup"><span data-stu-id="7aa52-185">Configuration options</span></span>

<span data-ttu-id="7aa52-186">**Endast granskning** – Du kan aktivera den här begränsningen i granskningsläget för att mäta den potentiella kompatibilitets påverkan på ett program.</span><span class="sxs-lookup"><span data-stu-id="7aa52-186">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="7aa52-187">Granskningshändelser kan sedan visas i händelsevisaren eller använda Avancerad sökning i [Microsoft Defender för slutpunkt.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="7aa52-187">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="code-integrity-guard"></a><span data-ttu-id="7aa52-188">Kodintegritetsskydd</span><span class="sxs-lookup"><span data-stu-id="7aa52-188">Code integrity guard</span></span>

### <a name="description"></a><span data-ttu-id="7aa52-189">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7aa52-189">Description</span></span>

<span data-ttu-id="7aa52-190">Kodintegritetsskydd ser till att alla binärfiler som läses in i en process signeras digitalt av Microsoft.</span><span class="sxs-lookup"><span data-stu-id="7aa52-190">Code integrity guard ensures that all binaries loaded into a process are digitally signed by Microsoft.</span></span> <span data-ttu-id="7aa52-191">Kodintegritetsskydd inkluderar [VAQL-signaturer](https://docs.microsoft.com/windows-hardware/drivers/install/whql-release-signature) (Windows Hardware Quality Labs), som gör att VAQL-godkända drivrutiner kan köras i processen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-191">Code integrity guard includes [WHQL](https://docs.microsoft.com/windows-hardware/drivers/install/whql-release-signature) (Windows Hardware Quality Labs) signatures, which will allow WHQL-approved drivers to run within the process.</span></span>

<span data-ttu-id="7aa52-192">Den här begränsningen implementeras i minneshanteraren, vilket blockerar den binära binärfunktionen från att mappas till minnet.</span><span class="sxs-lookup"><span data-stu-id="7aa52-192">This mitigation is implemented within the memory manager, which blocks the binary from being mapped into memory.</span></span> <span data-ttu-id="7aa52-193">Om du försöker läsa in en binär fil som inte är signerad av Microsoft returnerar minnesmanger ett STATUS_INVALID_IMAGE_HASH.</span><span class="sxs-lookup"><span data-stu-id="7aa52-193">If you attempt to load a binary that is not signed by Microsoft, the memory manger will return the error STATUS_INVALID_IMAGE_HASH.</span></span> <span data-ttu-id="7aa52-194">Genom att blockera på minneshanterarens nivå förhindrar det här både binärfiler som läses in av processen och binärfiler som matas in i processen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-194">By blocking at the memory manager level, this prevents both binaries loaded by the process and binaries injected into the process.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="7aa52-195">Överväganden för kompatibilitet</span><span class="sxs-lookup"><span data-stu-id="7aa52-195">Compatibility considerations</span></span>

<span data-ttu-id="7aa52-196">Den här begränsningen blockerar specifikt alla binära filer som inte har signerats av Microsoft.</span><span class="sxs-lookup"><span data-stu-id="7aa52-196">This mitigation specifically blocks any binary that is not signed by Microsoft.</span></span> <span data-ttu-id="7aa52-197">Därför är det inte kompatibelt med de flesta tredjepartsprogram, såvida inte programvaran distribueras av (och digitalt signeras av) Microsoft Store, och alternativet att tillåta inläsning av bilder som är signerade av Microsoft Store är markerat.</span><span class="sxs-lookup"><span data-stu-id="7aa52-197">As such, it will be incompatible with most third-party software, unless that software is distributed by (and digitally signed by) the Microsoft Store, and the option to allow loading of images signed by the Microsoft Store is selected.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="7aa52-198">Konfigurationsalternativ</span><span class="sxs-lookup"><span data-stu-id="7aa52-198">Configuration options</span></span>

<span data-ttu-id="7aa52-199">**Tillåt även** inläsning av bilder som signerats av Microsoft Store – Program som distribueras av Microsoft Store kommer att signeras digitalt av Microsoft Store, och om du lägger till den här konfigurationen kan binärfiler som har gått igenom arkivcertifieringsprocessen läsas in i programmet.</span><span class="sxs-lookup"><span data-stu-id="7aa52-199">**Also allow loading of images signed by Microsoft Store** - Applications that are distributed by the Microsoft Store will be digitally signed by the Microsoft Store, and adding this configuration will allow binaries that have gone through the store certification process to be loaded by the application.</span></span>

<span data-ttu-id="7aa52-200">**Endast granskning** – Du kan aktivera den här begränsningen i granskningsläget för att mäta den potentiella kompatibilitets påverkan på ett program.</span><span class="sxs-lookup"><span data-stu-id="7aa52-200">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="7aa52-201">Granskningshändelser kan sedan visas i händelsevisaren eller använda Avancerad sökning i [Microsoft Defender för slutpunkt.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="7aa52-201">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="control-flow-guard-cfg"></a><span data-ttu-id="7aa52-202">Kontrollflödesskydd (CFG)</span><span class="sxs-lookup"><span data-stu-id="7aa52-202">Control flow guard (CFG)</span></span>

### <a name="description"></a><span data-ttu-id="7aa52-203">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7aa52-203">Description</span></span>

<span data-ttu-id="7aa52-204">CfG (Control Flow Guard) minimerar risken för attacker med hjälp av säkerhetsproblem med minnesfel genom att skydda indirekta funktionsanrop.</span><span class="sxs-lookup"><span data-stu-id="7aa52-204">Control flow guard (CFG) mitigates the risk of attackers using memory corruption vulnerabilities by protecting indirect function calls.</span></span> <span data-ttu-id="7aa52-205">En attackerare kan till exempel använda en minnesbuffert för att skriva över minne som innehåller en funktionspekare och ersätta funktionspekaren med en pekare till valfri körbar kod (som också kan ha matats in i programmet).</span><span class="sxs-lookup"><span data-stu-id="7aa52-205">For example, an attacker may user a buffer overflow vulnerability to overwrite memory containing a function pointer, and replace that function pointer with a pointer to executable code of their choice (which may also have been injected into the program).</span></span>

<span data-ttu-id="7aa52-206">Den här begränsningen tillhandahålls genom att mata in en annan kontroll på kompileringstiden.</span><span class="sxs-lookup"><span data-stu-id="7aa52-206">This mitigation is provided by injecting another check at compile time.</span></span> <span data-ttu-id="7aa52-207">Innan varje indirekt funktionsanrop läggs till, ytterligare ett instruktioner som verifierar att målet är ett giltigt samtalsmål innan det anropas.</span><span class="sxs-lookup"><span data-stu-id="7aa52-207">Before each indirect function call, another instructions are added which verify that the target is a valid call target before it is called.</span></span> <span data-ttu-id="7aa52-208">Om målet inte är ett giltigt samtalsmål avslutas programmet.</span><span class="sxs-lookup"><span data-stu-id="7aa52-208">If the target is not a valid call target, then the application is terminated.</span></span> <span data-ttu-id="7aa52-209">Därför kan endast program som sammanställs med CFG-stöd dra nytta av den här begränsningen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-209">As such, only applications that are compiled with CFG support can benefit from this mitigation.</span></span>

<span data-ttu-id="7aa52-210">Kontrollen av ett giltigt mål tillhandahålls av Windows kernel.</span><span class="sxs-lookup"><span data-stu-id="7aa52-210">The check for a valid target is provided by the Windows kernel.</span></span> <span data-ttu-id="7aa52-211">När körbara filer läses in extraheras metadata för indirekta samtalsmål vid inläsningstid och markeras som giltiga samtalsmål.</span><span class="sxs-lookup"><span data-stu-id="7aa52-211">When executable files are loaded, the metadata for indirect call targets is extracted at load time and marked as valid call targets.</span></span> <span data-ttu-id="7aa52-212">När minne tilldelas och markeras som körbar (till exempel för genererad kod) markeras även dessa minnesplatser som giltiga samtalsmål, för att stödja mekanismer som JIT-kompilering.</span><span class="sxs-lookup"><span data-stu-id="7aa52-212">Additionally, when memory is allocated and marked as executable (such as for generated code), these memory locations are also marked as valid call targets, to support mechanisms such as JIT compilation.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="7aa52-213">Överväganden för kompatibilitet</span><span class="sxs-lookup"><span data-stu-id="7aa52-213">Compatibility considerations</span></span>

<span data-ttu-id="7aa52-214">Eftersom programmen måste kompileras för att stödja CFG deklareras de implicit med kompatibilitet med det.</span><span class="sxs-lookup"><span data-stu-id="7aa52-214">Since applications must be compiled to support CFG, they implicitly declare their compatibility with it.</span></span> <span data-ttu-id="7aa52-215">De flesta program bör därför arbeta med den här minskning som aktiverats.</span><span class="sxs-lookup"><span data-stu-id="7aa52-215">Most applications, therefore, should work with this mitigation enabled.</span></span> <span data-ttu-id="7aa52-216">Eftersom dessa kontroller sammanställs i den binära versionen är det bara att inaktivera kontroller i Windows kernel.</span><span class="sxs-lookup"><span data-stu-id="7aa52-216">Because these checks are compiled into the binary, the configuration you can apply is merely to disable checks within the Windows kernel.</span></span> <span data-ttu-id="7aa52-217">Minskningar är med andra ord på standardinställningen, men du kan konfigurera Windows Kernel så att det alltid returnerar "ja" om du senare upptäcker att det finns ett kompatibilitetsproblem som programutvecklaren inte upptäckte i sina tester, vilket bör vara ovanligt.</span><span class="sxs-lookup"><span data-stu-id="7aa52-217">In other words, the mitigation is on by default, but you can configure the Windows kernel to always return "yes" if you later determine that there is a compatibility issue that the application developer did not discover in their testing, which should be rare.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="7aa52-218">Konfigurationsalternativ</span><span class="sxs-lookup"><span data-stu-id="7aa52-218">Configuration options</span></span>

<span data-ttu-id="7aa52-219">**Använd strikt CFG** – I strikt läge måste alla binärfiler som lästs in i processen kompileras för Control Flow Guard (eller ha ingen körbar kod i dem – till exempel resurs-dll:er) för att kunna läsas in.</span><span class="sxs-lookup"><span data-stu-id="7aa52-219">**Use strict CFG** - In strict mode, all binaries loaded into the process must be compiled for Control Flow Guard (or have no executable code in them - such as resource dlls) in order to be loaded.</span></span>

> [!Note]
> <span data-ttu-id="7aa52-220">**Kontrollflödesskydd har** inget granskningsläge.</span><span class="sxs-lookup"><span data-stu-id="7aa52-220">**Control flow guard** has no audit mode.</span></span> <span data-ttu-id="7aa52-221">Binärfiler sammanställs med den här minskning aktiverad.</span><span class="sxs-lookup"><span data-stu-id="7aa52-221">Binaries are compiled with this mitigation enabled.</span></span>

## <a name="data-execution-prevention-dep"></a><span data-ttu-id="7aa52-222">Dataexekveringsskydd (DEP)</span><span class="sxs-lookup"><span data-stu-id="7aa52-222">Data Execution Prevention (DEP)</span></span>

### <a name="description"></a><span data-ttu-id="7aa52-223">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7aa52-223">Description</span></span>

<span data-ttu-id="7aa52-224">Skydd mot datakörning förhindrar att minne som inte uttryckligen tilldelats som körbart körs.</span><span class="sxs-lookup"><span data-stu-id="7aa52-224">Data execution prevention (DEP) prevents memory that was not explicitly allocated as executable from being executed.</span></span> <span data-ttu-id="7aa52-225">DEP hjälper till att skydda mot en attackerare som matar in skadlig kod i processen, till exempel genom ett buffertöverflöde, och kör sedan koden.</span><span class="sxs-lookup"><span data-stu-id="7aa52-225">DEP helps protect against an attacker injecting malicious code into the process, such as through a buffer overflow, and then executing that code.</span></span>

<span data-ttu-id="7aa52-226">Om du försöker ställa in instruktionspekaren till en minnesadress som inte är markerad som körbar får processorn ett undantag (allmän säkerhetsöverträdelse), vilket gör att programmet kraschar.</span><span class="sxs-lookup"><span data-stu-id="7aa52-226">If you attempt to set the instruction pointer to a memory address not marked as executable, the processor will throw an exception (general-protection violation), causing the application to crash.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="7aa52-227">Överväganden för kompatibilitet</span><span class="sxs-lookup"><span data-stu-id="7aa52-227">Compatibility considerations</span></span>

<span data-ttu-id="7aa52-228">Alla körbara x64-, ARM- och ARM-64-filer har DEP aktiverat som standard och kan inte inaktiveras.</span><span class="sxs-lookup"><span data-stu-id="7aa52-228">All x64, ARM, and ARM-64 executables have DEP enabled by default, and it cannot be disabled.</span></span> <span data-ttu-id="7aa52-229">Eftersom ett program aldrig har körts utan DEP förutsätts kompatibilitet.</span><span class="sxs-lookup"><span data-stu-id="7aa52-229">Since an application will have never been executed without DEP, compatibility is assumed.</span></span>

<span data-ttu-id="7aa52-230">Alla 32-bitars binärvärden (x86) har DEP aktiverat som standard, men DEP kan inaktiveras per process.</span><span class="sxs-lookup"><span data-stu-id="7aa52-230">All x86 (32-bit) binaries have DEP enabled by default, but DEP can be disabled per process.</span></span> <span data-ttu-id="7aa52-231">Vissa äldre program, vanligtvis program som utvecklats före Windows XP SP2, kanske inte är kompatibla med DEP.</span><span class="sxs-lookup"><span data-stu-id="7aa52-231">Some old legacy applications, typically applications developed prior to Windows XP SP2, might not be compatible with DEP.</span></span> <span data-ttu-id="7aa52-232">Sådana program genererar vanligtvis kod dynamiskt (till exempel JIT-kompilerar) eller länkar till äldre bibliotek (till exempel äldre versioner av ATL) som dynamiskt genererar kod.</span><span class="sxs-lookup"><span data-stu-id="7aa52-232">Such applications typically generate code dynamically (for example, JIT compiling) or link to older libraries (such as older versions of ATL) which dynamically generate code.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="7aa52-233">Konfigurationsalternativ</span><span class="sxs-lookup"><span data-stu-id="7aa52-233">Configuration options</span></span>

<span data-ttu-id="7aa52-234">**Enable ATL Thunk emulation** – This configuration option disables ATL Thunk emulation.</span><span class="sxs-lookup"><span data-stu-id="7aa52-234">**Enable ATL Thunk emulation** - This configuration option disables ATL Thunk emulation.</span></span> <span data-ttu-id="7aa52-235">ATL, ActiveX-mallbiblioteket, har utformats för att vara så litet och snabbt som möjligt.</span><span class="sxs-lookup"><span data-stu-id="7aa52-235">ATL, the ActiveX Template Library, is designed to be as small and fast as possible.</span></span> <span data-ttu-id="7aa52-236">För att minska den binära storleken skulle den använda en teknik som kallas *thunking.*</span><span class="sxs-lookup"><span data-stu-id="7aa52-236">In order to reduce binary size, it would use a technique called *thunking*.</span></span> <span data-ttu-id="7aa52-237">Thunking är normalt tänkt att interagera mellan 32-bitars och 16-bitars program, men det finns inga 16-bitarskomponenter till ATL här.</span><span class="sxs-lookup"><span data-stu-id="7aa52-237">Thunking is typically thought of for interacting between 32-bit and 16-bit applications, but there are no 16-bit components to ATL here.</span></span> <span data-ttu-id="7aa52-238">För att i stället optimera för binär storlek lagrar ATL maskinkod i minnet som inte är ordjusterad (vilket skapar en mindre binär), och anropar sedan koden direkt.</span><span class="sxs-lookup"><span data-stu-id="7aa52-238">Rather, in order to optimize for binary size, ATL will store machine code in memory that is not word-aligned (creating a smaller binary), and then invoke that code directly.</span></span> <span data-ttu-id="7aa52-239">ATL-komponenter som har kompilerats med Visual Studio 7.1 eller tidigare (Visual Studio 2003) använder inte minnet som körbar - thunk emulation löser kompatibilitetsproblemet.</span><span class="sxs-lookup"><span data-stu-id="7aa52-239">ATL components compiled with Visual Studio 7.1 or earlier (Visual Studio 2003) do not allocate this memory as executable - thunk emulation resolves that compatibility issue.</span></span> <span data-ttu-id="7aa52-240">Program som har en binär förlängningsmodell (till exempel Internet Explorer 11) måste ofta ha ATL Thunk-utökning aktiverad.</span><span class="sxs-lookup"><span data-stu-id="7aa52-240">Applications that have a binary extension model (such as Internet Explorer 11) will often need to have ATL Thunk emulation enabled.</span></span>

## <a name="disable-extension-points"></a><span data-ttu-id="7aa52-241">Inaktivera förlängningspunkter</span><span class="sxs-lookup"><span data-stu-id="7aa52-241">Disable extension points</span></span>

### <a name="description"></a><span data-ttu-id="7aa52-242">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7aa52-242">Description</span></span>

<span data-ttu-id="7aa52-243">Den här begränsningen inaktiverar olika tilläggspunkter för ett program, som kan användas för att upprätta bestående eller förhöjda behörigheter för skadligt innehåll.</span><span class="sxs-lookup"><span data-stu-id="7aa52-243">This mitigation disables various extension points for an application, which might be used to establish persistence or elevate privileges of malicious content.</span></span>

<span data-ttu-id="7aa52-244">Det omfattar:</span><span class="sxs-lookup"><span data-stu-id="7aa52-244">This includes:</span></span>

- <span data-ttu-id="7aa52-245">**AppInit DLL-filer** – När en process startar läser systemet in den angivna DLL-filen i kontexten för den nyligen startade processen innan den anropar dess startpunktsfunktion.</span><span class="sxs-lookup"><span data-stu-id="7aa52-245">**AppInit DLLs** - Whenever a process starts, the system will load the specified DLL into to context of the newly started process before calling its entry point function.</span></span> <span data-ttu-id="7aa52-246">[Information om AppInit DLL-filer finns här](https://docs.microsoft.com/windows/win32/winmsg/about-window-classes#application-global-classes).</span><span class="sxs-lookup"><span data-stu-id="7aa52-246">[Details on AppInit DLLs can be found here](https://docs.microsoft.com/windows/win32/winmsg/about-window-classes#application-global-classes).</span></span> <span data-ttu-id="7aa52-247">Med den här minskningen används inte URL-filer för AppInit.</span><span class="sxs-lookup"><span data-stu-id="7aa52-247">With this mitigation applied, AppInit DLLs are not loaded.</span></span> <span data-ttu-id="7aa52-248">Från och med Windows 7 måste APPInit-DLL-filer signeras digitalt enligt [beskrivningen här](https://docs.microsoft.com/windows/win32/win7appqual/appinit-dlls-in-windows-7-and-windows-server-2008-r2).</span><span class="sxs-lookup"><span data-stu-id="7aa52-248">Beginning with Windows 7, AppInit DLLs need to be digitally signed, [as described here](https://docs.microsoft.com/windows/win32/win7appqual/appinit-dlls-in-windows-7-and-windows-server-2008-r2).</span></span> <span data-ttu-id="7aa52-249">Från och med Windows 8 läses AppInit-DLL-filer inte in om SecureBoot är aktiverat, [enligt beskrivningen här](https://docs.microsoft.com/windows/win32/dlls/secure-boot-and-appinit-dlls).</span><span class="sxs-lookup"><span data-stu-id="7aa52-249">Additionally, beginning with Windows 8, AppInit DLLs will not be loaded if SecureBoot is enabled, [as described here](https://docs.microsoft.com/windows/win32/dlls/secure-boot-and-appinit-dlls).</span></span>
- <span data-ttu-id="7aa52-250">**Äldre snabbmeddelanden** – Med en IME (Input Method Editor) kan en användare skriva text på ett språk med fler tecken än vad som kan representeras på ett tangentbord.</span><span class="sxs-lookup"><span data-stu-id="7aa52-250">**Legacy IMEs** - An Input Method Editor (IME) allows a user to type text in a language that has more characters than can be represented on a keyboard.</span></span> <span data-ttu-id="7aa52-251">Tredje part kan skapa snabbmeddelanden.</span><span class="sxs-lookup"><span data-stu-id="7aa52-251">Third parties are able to create IMEs.</span></span> <span data-ttu-id="7aa52-252">En skadlig IME kan erhålla autentiseringsuppgifter eller annan känslig information från den här indatainspelningen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-252">A malicious IME might obtain credentials or other sensitive information from this input capture.</span></span> <span data-ttu-id="7aa52-253">Vissa snabbmeddelanden, så kallade äldre snabbmeddelanden, fungerar bara på Windows-skrivbordsappar och inte på UWP-appar.</span><span class="sxs-lookup"><span data-stu-id="7aa52-253">Some IMEs, referred to as Legacy IMEs, will only work on Windows Desktop apps, and not UWP apps.</span></span> <span data-ttu-id="7aa52-254">Den här begränsningen förhindrar också att den äldre IME:n läses in i den angivna Windows-skrivbordsappen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-254">This mitigation will also prevent this legacy IME from loading into the specified Windows Desktop app.</span></span>
- <span data-ttu-id="7aa52-255">**Windows Händelsekrokar** – ett program kan anropa [API:t SetWinEventHook](https://docs.microsoft.com/windows/win32/api/winuser/nf-winuser-setwineventhook) för att registrera intresse för en händelse som äger rum.</span><span class="sxs-lookup"><span data-stu-id="7aa52-255">**Windows Event Hooks** - An application can call the [SetWinEventHook API](https://docs.microsoft.com/windows/win32/api/winuser/nf-winuser-setwineventhook) to register interest in an event taking place.</span></span> <span data-ttu-id="7aa52-256">En DLL anges och kan matas in i processen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-256">A DLL is specified and can be injected into the process.</span></span> <span data-ttu-id="7aa52-257">Den här minskningen tvingar haken att publiceras till registreringsprocessen i stället för att köras i processen via en matad DLL.</span><span class="sxs-lookup"><span data-stu-id="7aa52-257">This mitigation forces the hook to be posted to the registering process rather than running in-process through an injected DLL.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="7aa52-258">Överväganden för kompatibilitet</span><span class="sxs-lookup"><span data-stu-id="7aa52-258">Compatibility considerations</span></span>

<span data-ttu-id="7aa52-259">De flesta av dessa tilläggspunkter används relativt sällan, så kompatibilitetseffekterna är i regel små, särskilt på enskilda programnivå.</span><span class="sxs-lookup"><span data-stu-id="7aa52-259">Most of these extension points are relatively infrequently used, so compatibility impact is typically small, particularly at an individual application level.</span></span> <span data-ttu-id="7aa52-260">Den enda frågan är om användarna använder äldre snabbmeddelanden från tredje part som inte fungerar med det skyddade programmet.</span><span class="sxs-lookup"><span data-stu-id="7aa52-260">The one consideration is if users are using third-party Legacy IMEs that will not work with the protected application.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="7aa52-261">Konfigurationsalternativ</span><span class="sxs-lookup"><span data-stu-id="7aa52-261">Configuration options</span></span>

<span data-ttu-id="7aa52-262">Det finns inga konfigurationsalternativ för den här begränsningen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-262">There are no configuration options for this mitigation.</span></span>

> [!Note]
> <span data-ttu-id="7aa52-263">**Det finns inget granskningsläge** för inaktivera tilläggspunkter.</span><span class="sxs-lookup"><span data-stu-id="7aa52-263">**Disable extension points** has no audit mode.</span></span>

## <a name="disable-win32k-system-calls"></a><span data-ttu-id="7aa52-264">Inaktivera Win32k-systemsamtal</span><span class="sxs-lookup"><span data-stu-id="7aa52-264">Disable Win32k system calls</span></span>

### <a name="description"></a><span data-ttu-id="7aa52-265">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7aa52-265">Description</span></span>

<span data-ttu-id="7aa52-266">Win32k.sys ger en bred attackyta för en attackerare.</span><span class="sxs-lookup"><span data-stu-id="7aa52-266">Win32k.sys provides a broad attack surface for an attacker.</span></span> <span data-ttu-id="7aa52-267">Som kernel-läge-komponent används den ofta som en escape-vektor för program som är begränsade i begränsat läge.</span><span class="sxs-lookup"><span data-stu-id="7aa52-267">As a kernel-mode component, it is frequently targeted as an escape vector for applications that are sandboxed.</span></span> <span data-ttu-id="7aa52-268">Den här begränsningen förhindrar anrop till win32k.sys genom att blockera en tråd från att konvertera sig själv till en GUI-tråd, som sedan får åtkomst till Win32k-funktioner.</span><span class="sxs-lookup"><span data-stu-id="7aa52-268">This mitigation prevents calls into win32k.sys by blocking a thread from converting itself into a GUI thread, which is then given access to invoke Win32k functions.</span></span> <span data-ttu-id="7aa52-269">En tråd är icke-GUI när den skapas, men konverteras vid första anrop till win32k.sys, eller via ett API-anrop till [IsGuiThread.](https://docs.microsoft.com/windows/win32/api/winuser/nf-winuser-isguithread)</span><span class="sxs-lookup"><span data-stu-id="7aa52-269">A thread is non-GUI when created, but converted on first call to win32k.sys, or through an API call to [IsGuiThread](https://docs.microsoft.com/windows/win32/api/winuser/nf-winuser-isguithread).</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="7aa52-270">Överväganden för kompatibilitet</span><span class="sxs-lookup"><span data-stu-id="7aa52-270">Compatibility considerations</span></span>

<span data-ttu-id="7aa52-271">Den här begränsningen är avsedd för processer som är dedikerade icke-användargränssnittsprocesser.</span><span class="sxs-lookup"><span data-stu-id="7aa52-271">This mitigation is designed for processes that are dedicated non-UI processes.</span></span> <span data-ttu-id="7aa52-272">Många moderna webbläsare använder till exempel processisolering och använder processer som inte har med användargränssnittet att göra.</span><span class="sxs-lookup"><span data-stu-id="7aa52-272">For example, many modern browsers will use process isolation and incorporate non-UI processes.</span></span> <span data-ttu-id="7aa52-273">Alla program som visar ett GUI med en enda process kommer att påverkas av den här begränsningen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-273">Any application that displays a GUI using a single process will be impacted by this mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="7aa52-274">Konfigurationsalternativ</span><span class="sxs-lookup"><span data-stu-id="7aa52-274">Configuration options</span></span>

<span data-ttu-id="7aa52-275">**Endast granskning** – Du kan aktivera den här begränsningen i granskningsläget för att mäta den potentiella kompatibilitets påverkan på ett program.</span><span class="sxs-lookup"><span data-stu-id="7aa52-275">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="7aa52-276">Granskningshändelser kan sedan visas i händelsevisaren eller använda Avancerad sökning i [Microsoft Defender för slutpunkt.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="7aa52-276">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="do-not-allow-child-processes"></a><span data-ttu-id="7aa52-277">Tillåt inte underordnade processer</span><span class="sxs-lookup"><span data-stu-id="7aa52-277">Do not allow child processes</span></span>

### <a name="description"></a><span data-ttu-id="7aa52-278">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7aa52-278">Description</span></span>

<span data-ttu-id="7aa52-279">Den här begränsningen förhindrar att ett program skapar nya underordnade program.</span><span class="sxs-lookup"><span data-stu-id="7aa52-279">This mitigation prevents an application from creating new child applications.</span></span> <span data-ttu-id="7aa52-280">En vanlig metod som används av adversaries är att initiera en betrodd process på enheten med skadliga indata (en attack som "lever på landet" ), som ofta kräver att ett annat program startas på enheten.</span><span class="sxs-lookup"><span data-stu-id="7aa52-280">A common technique used by adversaries is to initiate a trusted process on the device with malicious input (a "living off the land" attack), which often requires launching another application on the device.</span></span> <span data-ttu-id="7aa52-281">Om det inte finns några legitima skäl till att ett program skulle starta en underordnad process, minimerar denna minskning den potentiella attackvektorn.</span><span class="sxs-lookup"><span data-stu-id="7aa52-281">If there are no legitimate reasons why an application would launch a child process, this mitigation mitigates that potential attack vector.</span></span> <span data-ttu-id="7aa52-282">Minskning tillämpas genom att ange en egenskap för processtoken, som blockerar skapandet av en token för den underordnade processen med felmeddelandet STATUS_CHILD_PROCESS_BLOCKED.</span><span class="sxs-lookup"><span data-stu-id="7aa52-282">The mitigation is applied by setting a property on the process token, which blocks creating a token for the child process with the error message STATUS_CHILD_PROCESS_BLOCKED.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="7aa52-283">Överväganden för kompatibilitet</span><span class="sxs-lookup"><span data-stu-id="7aa52-283">Compatibility considerations</span></span>

<span data-ttu-id="7aa52-284">Om programmet startar underordnade program av någon anledning, till exempel för hyperlänkar som startar en webbläsare eller en extern webbläsare, eller som startar andra verktyg på datorn, fungerar den här funktionen inte korrekt.</span><span class="sxs-lookup"><span data-stu-id="7aa52-284">If your application launches child applications for any reason, such as supporting hyperlinks that launch a browser or an external browser, or which launch other utilities on the computer, this functionality will be broken with this mitigation applied.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="7aa52-285">Konfigurationsalternativ</span><span class="sxs-lookup"><span data-stu-id="7aa52-285">Configuration options</span></span>

<span data-ttu-id="7aa52-286">**Endast granskning** – Du kan aktivera den här begränsningen i granskningsläget för att mäta den potentiella kompatibilitets påverkan på ett program.</span><span class="sxs-lookup"><span data-stu-id="7aa52-286">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="7aa52-287">Granskningshändelser kan sedan visas i händelsevisaren eller använda Avancerad sökning i [Microsoft Defender för slutpunkt.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="7aa52-287">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="export-address-filtering"></a><span data-ttu-id="7aa52-288">Exportera adressfiltrering</span><span class="sxs-lookup"><span data-stu-id="7aa52-288">Export address filtering</span></span>

### <a name="description"></a><span data-ttu-id="7aa52-289">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7aa52-289">Description</span></span>

<span data-ttu-id="7aa52-290">Export address filtering (EAF) mitigates the risk of malicious code looking at the export address table of all loaded modules to find modules that contain useful APIIs for their attack.</span><span class="sxs-lookup"><span data-stu-id="7aa52-290">Export address filtering (EAF) mitigates the risk of malicious code looking at the export address table of all loaded modules to find modules that contain useful APIs for their attack.</span></span> <span data-ttu-id="7aa52-291">Detta är en vanlig taktik som används av shellcode.</span><span class="sxs-lookup"><span data-stu-id="7aa52-291">This is a common tactic used by shellcode.</span></span> <span data-ttu-id="7aa52-292">För att minimera risken för en sådan attack skyddar den här minskning tre vanliga fallande moduler:</span><span class="sxs-lookup"><span data-stu-id="7aa52-292">In order to mitigate the risk of such an attack, this mitigation protects three commonly attacked modules:</span></span>

- <span data-ttu-id="7aa52-293">ntdll.dll</span><span class="sxs-lookup"><span data-stu-id="7aa52-293">ntdll.dll</span></span>
- <span data-ttu-id="7aa52-294">kernelbase.dll</span><span class="sxs-lookup"><span data-stu-id="7aa52-294">kernelbase.dll</span></span>
- <span data-ttu-id="7aa52-295">kernel32.dll</span><span class="sxs-lookup"><span data-stu-id="7aa52-295">kernel32.dll</span></span>

<span data-ttu-id="7aa52-296">Minskningar skyddar minnessidan i [exportkatalogen som pekar på [tabellen exportadress.](https://docs.microsoft.com/windows/win32/debug/pe-format#export-address-table)</span><span class="sxs-lookup"><span data-stu-id="7aa52-296">The mitigation protects the memory page in the [export directory that points to the [export address table](https://docs.microsoft.com/windows/win32/debug/pe-format#export-address-table).</span></span> <span data-ttu-id="7aa52-297">Den här minnessidan har [PAGE_GUARD](https://docs.microsoft.com/windows/win32/memory/creating-guard-pages) det skydd som används.</span><span class="sxs-lookup"><span data-stu-id="7aa52-297">This memory page will have the [PAGE_GUARD](https://docs.microsoft.com/windows/win32/memory/creating-guard-pages) protection applied to it.</span></span> <span data-ttu-id="7aa52-298">När någon försöker komma åt det här minnet genereras en STATUS_GUARD_PAGE_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="7aa52-298">When someone tries to access this memory, it will generate a STATUS_GUARD_PAGE_VIOLATION.</span></span> <span data-ttu-id="7aa52-299">Begränsningshandtagen för det här undantaget och om instruktionen om åtkomst inte valideras avslutas processen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-299">The mitigation handles this exception, and if the accessing instruction doesn't pass validation, the process will be terminated.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="7aa52-300">Överväganden för kompatibilitet</span><span class="sxs-lookup"><span data-stu-id="7aa52-300">Compatibility considerations</span></span>

<span data-ttu-id="7aa52-301">Den här begränsningen är främst ett problem för program som felsökning, begränsade program, program som använder DRM eller program som implementerar teknik för felsökning.</span><span class="sxs-lookup"><span data-stu-id="7aa52-301">This mitigation is primarily an issue for applications such as debuggers, sandboxed applications, applications using DRM, or applications that implement anti-debugging technology.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="7aa52-302">Konfigurationsalternativ</span><span class="sxs-lookup"><span data-stu-id="7aa52-302">Configuration options</span></span>

<span data-ttu-id="7aa52-303">**Validera åtkomst för moduler som** ofta utnyttjas av sårbarheter – Det här alternativet, som även kallas EAF+, ger skydd för andra moduler som ofta anar:</span><span class="sxs-lookup"><span data-stu-id="7aa52-303">**Validate access for modules that are commonly abused by exploits** - This option, also known as EAF+, adds protections for other commonly attacked modules:</span></span>

- `mshtml.dll`
- `flash*.ocx`
- `jscript*.ocx`
- `vbscript.dll`
- `vgx.dll`
- `mozjs.dll`
- `xul.dll`
- `acrord32.dll`
- `acrofx32.dll`
- `acroform.api`

<span data-ttu-id="7aa52-304">Genom att aktivera EAF+ lägger den här begränsningen dessutom till PAGE_GUARD-skyddet på sidan som innehåller rubriken "MZ", de två första bytena av [DOS-huvudet](https://docs.microsoft.com/windows/win32/debug/pe-format#ms-dos-stub-image-only)i en PE-fil , som är en annan aspekt av känt minnesinnehåll som shellcode kan leta efter för att identifiera moduler som kan vara intressanta i minnet.</span><span class="sxs-lookup"><span data-stu-id="7aa52-304">Additionally, by enabling EAF+, this mitigation adds the PAGE_GUARD protection to the page containing the "MZ" header, the first two bytes of the [DOS header in a PE file](https://docs.microsoft.com/windows/win32/debug/pe-format#ms-dos-stub-image-only), which is another aspect of known memory content which shellcode can look for to identify modules potentially of interest in memory.</span></span>

<span data-ttu-id="7aa52-305">**Endast granskning** – Du kan aktivera den här begränsningen i granskningsläget för att mäta den potentiella kompatibilitets påverkan på ett program.</span><span class="sxs-lookup"><span data-stu-id="7aa52-305">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="7aa52-306">Granskningshändelser kan sedan visas i händelsevisaren eller använda Avancerad sökning i [Microsoft Defender för slutpunkt.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="7aa52-306">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="force-randomization-for-images-mandatory-aslr"></a><span data-ttu-id="7aa52-307">Tvinga slumpmässiga bilder (obligatorisk ASLR)</span><span class="sxs-lookup"><span data-stu-id="7aa52-307">Force randomization for images (Mandatory ASLR)</span></span>

### <a name="description"></a><span data-ttu-id="7aa52-308">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7aa52-308">Description</span></span>

<span data-ttu-id="7aa52-309">ASLR (Address Space Layout Randomization) minimerar risken för en attacker genom att använda sin kunskap om minneslayouten i systemet för att köra kod som redan finns i processminnet och som redan har markerats som körbar.</span><span class="sxs-lookup"><span data-stu-id="7aa52-309">Address Space Layout Randomization (ASLR) mitigates the risk of an attacker using their knowledge of the memory layout of the system in order to execute code that is already present in process memory and already marked as executable.</span></span> <span data-ttu-id="7aa52-310">Detta kan minimera risken för en attackerare med hjälp av tekniker som return-to-libc-attacker, där adversaryen anger kontext och sedan ändrar returadressen för att köra befintlig kod med kontext som passar adversarys syfte.</span><span class="sxs-lookup"><span data-stu-id="7aa52-310">This can mitigate the risk of an attacker using techniques such as return-to-libc attacks, where the adversary sets the context and then modifies the return address to execute existing code with context that suits the adversary's purpose.</span></span>

<span data-ttu-id="7aa52-311">Obligatorisk ASLR tvingar en ombasning av alla DLL-filer i processen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-311">Mandatory ASLR forces a rebase of all DLLs within the process.</span></span> <span data-ttu-id="7aa52-312">En utvecklare kan aktivera ASLR med hjälp av [länkalternativet /DYNAMICBASE,](https://docs.microsoft.com/cpp/build/reference/dynamicbase-use-address-space-layout-randomization?view=vs-2019&preserve-view=true) och problemet har samma effekt.</span><span class="sxs-lookup"><span data-stu-id="7aa52-312">A developer can enable ASLR using the [/DYNAMICBASE](https://docs.microsoft.com/cpp/build/reference/dynamicbase-use-address-space-layout-randomization?view=vs-2019&preserve-view=true) linker option, and this mitigation has the same effect.</span></span>

<span data-ttu-id="7aa52-313">När minneshanteraren mappas i bilden till processen återbasar obligatorisk ASLR dll-filer och EXES-filer som inte har valt ASLR.</span><span class="sxs-lookup"><span data-stu-id="7aa52-313">When the memory manager is mapping in the image into the process, Mandatory ASLR will forcibly rebase DLLs and EXEs that have not opted in to ASLR.</span></span> <span data-ttu-id="7aa52-314">Observera dock att den här omgrundningen inte är pålitlig och kan därför placeras på en förutsägbar plats i minnet.</span><span class="sxs-lookup"><span data-stu-id="7aa52-314">Note, however, that this rebasing has no entropy, and can therefore be placed at a predictable location in memory.</span></span> <span data-ttu-id="7aa52-315">För rebased och randomiserad plats för binärfiler bör den här minskningen paras ihop med [Randomize minnestilldelningar (ASLR nedifrån](#randomize-memory-allocations-bottom-up-aslr)och upp).</span><span class="sxs-lookup"><span data-stu-id="7aa52-315">For rebased and randomized location of binaries, this mitigation should be paired with [Randomize memory allocations (Bottom-up ASLR)](#randomize-memory-allocations-bottom-up-aslr).</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="7aa52-316">Överväganden för kompatibilitet</span><span class="sxs-lookup"><span data-stu-id="7aa52-316">Compatibility considerations</span></span>

<span data-ttu-id="7aa52-317">Den här kompatibilitets påverkan på ASLR är vanligtvis begränsad till äldre program som skapats med hjälp av kompilatorer som gjorde antaganden om basadressen för en binär fil eller har rensat ut basinformation för miljön.</span><span class="sxs-lookup"><span data-stu-id="7aa52-317">This compatibility impact of ASLR is typically constrained to older applications that were built using compilers that made assumptions about the base address of a binary file or have stripped out base relocation information.</span></span> <span data-ttu-id="7aa52-318">Det kan leda till oförutsägbara fel när körningsflödet försöker hoppa till det förväntade stället för den faktiska platsen i minnet.</span><span class="sxs-lookup"><span data-stu-id="7aa52-318">This can lead to unpredictable errors as the execution flow attempts to jump to the expected, rather than the actual, location in memory.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="7aa52-319">Konfigurationsalternativ</span><span class="sxs-lookup"><span data-stu-id="7aa52-319">Configuration options</span></span>

<span data-ttu-id="7aa52-320">**Tillåt inte bortskalade bilder** – Det här alternativet blockerar inläsning av bilder som har rensat den här informationen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-320">**Do not allow stripped images** - This option blocks the loading of images that have had relocation information stripped.</span></span> <span data-ttu-id="7aa52-321">Windows PE-filformat innehåller absoluta adresser och kompilatorn genererar också en [basdetaltabell som inläsaren kan använda för att hitta alla relativa minnesreferenser och deras förskjutning, så att de kan uppdateras om den binära filen inte läses in vid den önskade basadressen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-321">The Windows PE file format contains absolute addresses, and the compiler also generates a [base relocation table that the loader can use to find all relative memory references and their offset, so they can be updated if the binary does not load at its preferred base address.</span></span> <span data-ttu-id="7aa52-322">Vissa äldre program tar bort den här informationen i produktions versioner och därför kan de här binärfilerna inte byggas om.</span><span class="sxs-lookup"><span data-stu-id="7aa52-322">Some older applications strip out this information in production builds, and therefore these binaries cannot be rebased.</span></span> <span data-ttu-id="7aa52-323">I sådana åtgärder blockeras sådana binärfiler från att läsas in (i stället för att de kan läsas in på önskad basadress).</span><span class="sxs-lookup"><span data-stu-id="7aa52-323">This mitigation blocks such binaries from being loaded (instead of allowing them to load at their preferred base address).</span></span>

> [!Note]
> <span data-ttu-id="7aa52-324">**Tvinga slumpmässiga bilder (obligatorisk ASLR) har** inget granskningsläge.</span><span class="sxs-lookup"><span data-stu-id="7aa52-324">**Force randomization for images (Mandatory ASLR)** has no audit mode.</span></span>

## <a name="import-address-filtering-iaf"></a><span data-ttu-id="7aa52-325">Importera adressfiltrering (IAF)</span><span class="sxs-lookup"><span data-stu-id="7aa52-325">Import address filtering (IAF)</span></span>

### <a name="description"></a><span data-ttu-id="7aa52-326">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7aa52-326">Description</span></span>

<span data-ttu-id="7aa52-327">Minskningar av importadressfiltrering (IAF) bidrar till att minska risken för att ett adversaryt ändrar kontrollflödet i ett program genom att ändra importadresstabellen (IAT) för att omdirigera till godtycklig kod för attackerarens val när den funktionen anropas.</span><span class="sxs-lookup"><span data-stu-id="7aa52-327">The import address filtering (IAF) mitigation helps mitigate the risk of an adversary changing the control flow of an application by modifying the import address table (IAT) to redirect to arbitrary code of the attacker's choice when that function is called.</span></span> <span data-ttu-id="7aa52-328">En attackerare kan använda den här metoden för att kapa kontrollen, eller för att snappa upp, kontrollera och potentiellt blockera samtal till känsliga API:er.</span><span class="sxs-lookup"><span data-stu-id="7aa52-328">An attacker could use this approach to hijack control, or to intercept, inspect, and potentially block calls to sensitive APIs.</span></span>

<span data-ttu-id="7aa52-329">Minnessidorna för alla skyddade API:er har [PAGE_GUARD](https://docs.microsoft.com/windows/win32/memory/creating-guard-pages) skydda dem.</span><span class="sxs-lookup"><span data-stu-id="7aa52-329">The memory pages for all protected APIs will have the [PAGE_GUARD](https://docs.microsoft.com/windows/win32/memory/creating-guard-pages) protection applied to them.</span></span> <span data-ttu-id="7aa52-330">När någon försöker komma åt det här minnet genereras en STATUS_GUARD_PAGE_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="7aa52-330">When someone tries to access this memory, it will generate a STATUS_GUARD_PAGE_VIOLATION.</span></span> <span data-ttu-id="7aa52-331">Begränsningshandtagen för det här undantaget och om instruktionen om åtkomst inte valideras avslutas processen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-331">The mitigation handles this exception, and if the accessing instruction doesn't pass validation, the process will be terminated.</span></span>

<span data-ttu-id="7aa52-332">Den här begränsningen skyddar följande Windows-API:er:</span><span class="sxs-lookup"><span data-stu-id="7aa52-332">This mitigation protects the following Windows APIs:</span></span>

- `GetProcAddress`
- `GetProcAddressForCaller`
- `LoadLibraryA`
- `LoadLibraryExA`
- `LoadLibraryW`
- `LoadLibraryExW`
- `LdrGetProcedureAddress`
- `LdrGetProcedureAddressEx`
- `LdrGetProcedureAddressForCaller`
- `LdrLoadDll`
- `VirtualProtect`
- `VirtualProtectEx`
- `VirtualAlloc`
- `VirtualAllocEx`
- `NtAllocateVirtualMemory`
- `NtProtectVirtualMemory`
- `CreateProcessA`
- `CreateProcessW`
- `WinExec`
- `CreateProcessAsUserA`
- `CreateProcessAsUserW`
- `GetModuleHandleA`
- `GetModuleHandleW`
- `RtlDecodePointer`
- `DecodePointer`

### <a name="compatibility-considerations"></a><span data-ttu-id="7aa52-333">Överväganden för kompatibilitet</span><span class="sxs-lookup"><span data-stu-id="7aa52-333">Compatibility considerations</span></span>

<span data-ttu-id="7aa52-334">Legitima program som utför API-avskärning kan upptäckas av den här begränsningen och orsaka att vissa program kraschar.</span><span class="sxs-lookup"><span data-stu-id="7aa52-334">Legitimate applications that perform API interception may be detected by this mitigation and cause some applications to crash.</span></span> <span data-ttu-id="7aa52-335">Det kan till exempel vara säkerhetsprogramvara och programkompatibilitet.</span><span class="sxs-lookup"><span data-stu-id="7aa52-335">Examples include security software and application compatibility shims.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="7aa52-336">Konfigurationsalternativ</span><span class="sxs-lookup"><span data-stu-id="7aa52-336">Configuration options</span></span>

<span data-ttu-id="7aa52-337">**Endast granskning** – Du kan aktivera den här begränsningen i granskningsläget för att mäta den potentiella kompatibilitets påverkan på ett program.</span><span class="sxs-lookup"><span data-stu-id="7aa52-337">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="7aa52-338">Granskningshändelser kan sedan visas i händelsevisaren eller använda Avancerad sökning i [Microsoft Defender för slutpunkt.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="7aa52-338">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="randomize-memory-allocations-bottom-up-aslr"></a><span data-ttu-id="7aa52-339">Slumpmässiga minnestilldelningar (Nedifrån och upp ASLR)</span><span class="sxs-lookup"><span data-stu-id="7aa52-339">Randomize memory allocations (Bottom-up ASLR)</span></span>

### <a name="description"></a><span data-ttu-id="7aa52-340">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7aa52-340">Description</span></span>

<span data-ttu-id="7aa52-341">Slumpmässiga minnestilldelningar (Nedifrån och upp-ASLR) lägger till enkanten i resurserna så att deras plats slumpmässigt blir mer slumpmässig och därför mindre förutsägbar.</span><span class="sxs-lookup"><span data-stu-id="7aa52-341">Randomize memory allocations (Bottom-up ASLR) adds entropy to relocations, so their location is randomized and therefore less predictable.</span></span> <span data-ttu-id="7aa52-342">Den här begränsningen kräver att obligatorisk ASLR verkställs.</span><span class="sxs-lookup"><span data-stu-id="7aa52-342">This mitigation requires Mandatory ASLR to take effect.</span></span>

<span data-ttu-id="7aa52-343">Storleken på 32-bitarsadressutrymmet innebär att du måste lägga till praktiska begränsningar för den uppil som kan läggas till, och därför blir det svårare för en attackerare att gissa sig till en plats i minnet, vilket gör det svårare för en attackerare att gissa sig till en plats i minnet.</span><span class="sxs-lookup"><span data-stu-id="7aa52-343">The size of the 32-bit address space places practical constraints on the entropy that can be added, and therefore 64-bit applications make it more difficult for an attacker to guess a location in memory.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="7aa52-344">Överväganden för kompatibilitet</span><span class="sxs-lookup"><span data-stu-id="7aa52-344">Compatibility considerations</span></span>

<span data-ttu-id="7aa52-345">De flesta program som är kompatibla med Obligatorisk ASLR (rebasing) är också kompatibla med den andra uppifrån och upp-ASLR.</span><span class="sxs-lookup"><span data-stu-id="7aa52-345">Most applications that are compatible with Mandatory ASLR (rebasing) are also compatible with the other entropy of Bottom-up ASLR.</span></span> <span data-ttu-id="7aa52-346">Vissa program kan ha problem med pekarens trunkering om de sparar lokala pekare i 32-bitarsvariabler (om en basadress förväntas under 4 GB), och det innebär att det inte är kompatibelt med alternativet hög enfot (som kan inaktiveras).</span><span class="sxs-lookup"><span data-stu-id="7aa52-346">Some applications may have pointer-truncation issues if they are saving local pointers in 32-bit variables (expecting a base address below 4 GB), and thus will be incompatible with the high entropy option (which can be disabled).</span></span>

### <a name="configuration-options"></a><span data-ttu-id="7aa52-347">Konfigurationsalternativ</span><span class="sxs-lookup"><span data-stu-id="7aa52-347">Configuration options</span></span>

<span data-ttu-id="7aa52-348">Använd inte hög **enpatisk** – det här alternativet inaktiverar användningen av hög enkantig ASLR, vilket lägger till 24 bitar av en kantiga (1 TB varians) i bottentilldelningen för 64-bitarsprogram.</span><span class="sxs-lookup"><span data-stu-id="7aa52-348">**Don't use high entropy** - this option disables the use of high-entropy ASLR, which adds 24 bits of entropy (1 TB of variance) into the bottom-up allocation for 64-bit applications.</span></span>

> [!Note]
> <span data-ttu-id="7aa52-349">**Randomisera minnestilldelningar (Nedifrån och upp ASLR) har** inget granskningsläge.</span><span class="sxs-lookup"><span data-stu-id="7aa52-349">**Randomize memory allocations (Bottom-up ASLR)** has no audit mode.</span></span>

## <a name="simulate-execution-simexec"></a><span data-ttu-id="7aa52-350">Simulera körning (SimExec)</span><span class="sxs-lookup"><span data-stu-id="7aa52-350">Simulate execution (SimExec)</span></span>

### <a name="description"></a><span data-ttu-id="7aa52-351">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7aa52-351">Description</span></span>

<span data-ttu-id="7aa52-352">Simulera körning (SimExec) är en minskning av endast 32-bitarsprogram.</span><span class="sxs-lookup"><span data-stu-id="7aa52-352">Simulate execution (SimExec) is a mitigation for 32-bit applications only.</span></span> <span data-ttu-id="7aa52-353">Det här hjälper till att verifiera att anrop till känsliga API:er återgår till legitima uppringningsfunktioner.</span><span class="sxs-lookup"><span data-stu-id="7aa52-353">This helps validate that calls to sensitive APIs will return to legitimate caller functions.</span></span> <span data-ttu-id="7aa52-354">Det gör detta genom att avlyssa anrop till känsliga API:er och sedan simulera körningen av dessa API:er genom att gå igenom de kodade sammansättningens språkanvisningar efter RET-instruktionen som bör återkomma till uppringaren.</span><span class="sxs-lookup"><span data-stu-id="7aa52-354">It does this by intercepting calls into sensitive APIs, and then simulating the execution of those APIs by walking through the encoded assembly language instructions looking for the RET instruction, which should return to the caller.</span></span> <span data-ttu-id="7aa52-355">Sedan inspekteras den funktionen och går bakåt i minnet för att hitta föregående SAMTAL-instruktion för att avgöra om funktionen och ANROPA-instruktionen matchar, och att RET-instruktionen inte har skärningspunkt.</span><span class="sxs-lookup"><span data-stu-id="7aa52-355">It then inspects that function and walks backwards in memory to find the preceding CALL instruction to determine whether the function and CALL instruction match, and that the RET hasn't been intercepted.</span></span>

<span data-ttu-id="7aa52-356">API:erna som snappas upp av den här begränsningen är:</span><span class="sxs-lookup"><span data-stu-id="7aa52-356">The APIs intercepted by this mitigation are:</span></span>

- `LoadLibraryA`
- `LoadLibraryW`
- `LoadLibraryExA`
- `LoadLibraryExW`
- `LdrLoadDll`
- `VirtualAlloc`
- `VirtualAllocEx`
- `NtAllocateVirtualMemory`
- `VirtualProtect`
- `VirtualProtectEx`
- `NtProtectVirtualMemory`
- `HeapCreate`
- `RtlCreateHeap`
- `CreateProcessA`
- `CreateProcessW`
- `CreateProcessInternalA`
- `CreateProcessInternalW`
- `NtCreateUserProcess`
- `NtCreateProcess`
- `NtCreateProcessEx`
- `CreateRemoteThread`
- `CreateRemoteThreadEx`
- `NtCreateThreadEx`
- `WriteProcessMemory`
- `NtWriteVirtualMemory`
- `WinExec`
- `CreateFileMappingA`
- `CreateFileMappingW`
- `CreateFileMappingNumaW`
- `NtCreateSection`
- `MapViewOfFile`
- `MapViewOfFileEx`
- `MapViewOfFileFromApp`
- `LdrGetProcedureAddressForCaller`

<span data-ttu-id="7aa52-357">Om en ROP-gadget upptäcks avslutas processen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-357">If a ROP gadget is detected, the process is terminated.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="7aa52-358">Överväganden för kompatibilitet</span><span class="sxs-lookup"><span data-stu-id="7aa52-358">Compatibility considerations</span></span>

<span data-ttu-id="7aa52-359">Program som utför API-avlyssning, särskilt säkerhetsprogramvara, kan orsaka kompatibilitetsproblem med den här begränsningen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-359">Applications that perform API interception, particularly security software, can cause compatibility problems with this mitigation.</span></span>

<span data-ttu-id="7aa52-360">Den här minskningar är inkompatibla med minskning av Arbitrary Code Guard.</span><span class="sxs-lookup"><span data-stu-id="7aa52-360">This mitigation is incompatible with the Arbitrary Code Guard mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="7aa52-361">Konfigurationsalternativ</span><span class="sxs-lookup"><span data-stu-id="7aa52-361">Configuration options</span></span>

<span data-ttu-id="7aa52-362">**Endast granskning** – Du kan aktivera den här begränsningen i granskningsläget för att mäta den potentiella kompatibilitets påverkan på ett program.</span><span class="sxs-lookup"><span data-stu-id="7aa52-362">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="7aa52-363">Granskningshändelser kan sedan visas i händelsevisaren eller använda Avancerad sökning i [Microsoft Defender för slutpunkt.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="7aa52-363">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="validate-api-invocation-callercheck"></a><span data-ttu-id="7aa52-364">Verifiera API-anrop (Anroparkontroll)</span><span class="sxs-lookup"><span data-stu-id="7aa52-364">Validate API invocation (CallerCheck)</span></span>

### <a name="description"></a><span data-ttu-id="7aa52-365">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7aa52-365">Description</span></span>

<span data-ttu-id="7aa52-366">Verifiera API-anrop (CallerCheck) är en minskning av ROP-tekniker (Return-oriented Programming) som verifierar att känsliga API:er anropades från en giltig anropare.</span><span class="sxs-lookup"><span data-stu-id="7aa52-366">Validate API invocation (CallerCheck) is a mitigation for return-oriented programming (ROP) techniques that validates that sensitive APIs were called from a valid caller.</span></span> <span data-ttu-id="7aa52-367">Minskningarna kontrollerar den godkända avsändaradressen och delar sedan upp samtalet bakåt för att fastställa om samtalsmålet matchar parametern som har passerat funktionen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-367">This mitigation inspects the passed return address, and then heuristically disassembles backwards to find a call above the return address to determine if the call target matches the parameter passed into the function.</span></span>

<span data-ttu-id="7aa52-368">API:erna som snappas upp av den här begränsningen är:</span><span class="sxs-lookup"><span data-stu-id="7aa52-368">The APIs intercepted by this mitigation are:</span></span>

- `LoadLibraryA`
- `LoadLibraryW`
- `LoadLibraryExA`
- `LoadLibraryExW`
- `LdrLoadDll`
- `VirtualAlloc`
- `VirtualAllocEx`
- `NtAllocateVirtualMemory`
- `VirtualProtect`
- `VirtualProtectEx`
- `NtProtectVirtualMemory`
- `HeapCreate`
- `RtlCreateHeap`
- `CreateProcessA`
- `CreateProcessW`
- `CreateProcessInternalA`
- `CreateProcessInternalW`
- `NtCreateUserProcess`
- `NtCreateProcess`
- `NtCreateProcessEx`
- `CreateRemoteThread`
- `CreateRemoteThreadEx`
- `NtCreateThreadEx`
- `WriteProcessMemory`
- `NtWriteVirtualMemory`
- `WinExec`
- `CreateFileMappingA`
- `CreateFileMappingW`
- `CreateFileMappingNumaW`
- `NtCreateSection`
- `MapViewOfFile`
- `MapViewOfFileEx`
- `MapViewOfFileFromApp`
- `LdrGetProcedureAddressForCaller`

<span data-ttu-id="7aa52-369">Om en ROP-gadget upptäcks avslutas processen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-369">If a ROP gadget is detected, the process is terminated.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="7aa52-370">Överväganden för kompatibilitet</span><span class="sxs-lookup"><span data-stu-id="7aa52-370">Compatibility considerations</span></span>

<span data-ttu-id="7aa52-371">Program som utför API-avlyssning, särskilt säkerhetsprogramvara, kan orsaka kompatibilitetsproblem med den här begränsningen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-371">Applications that perform API interception, particularly security software, can cause compatibility problems with this mitigation.</span></span>

<span data-ttu-id="7aa52-372">Den här minskningar är inkompatibla med minskning av Arbitrary Code Guard.</span><span class="sxs-lookup"><span data-stu-id="7aa52-372">This mitigation is incompatible with the Arbitrary Code Guard mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="7aa52-373">Konfigurationsalternativ</span><span class="sxs-lookup"><span data-stu-id="7aa52-373">Configuration options</span></span>

<span data-ttu-id="7aa52-374">**Endast granskning** – Du kan aktivera den här begränsningen i granskningsläget för att mäta den potentiella kompatibilitets påverkan på ett program.</span><span class="sxs-lookup"><span data-stu-id="7aa52-374">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="7aa52-375">Granskningshändelser kan sedan visas i händelsevisaren eller använda Avancerad sökning i [Microsoft Defender för slutpunkt.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="7aa52-375">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="validate-exception-chains-sehop"></a><span data-ttu-id="7aa52-376">Verifiera undantagskedjor (SEHOP)</span><span class="sxs-lookup"><span data-stu-id="7aa52-376">Validate exception chains (SEHOP)</span></span>

### <a name="description"></a><span data-ttu-id="7aa52-377">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7aa52-377">Description</span></span>

<span data-ttu-id="7aa52-378">Verifiera undantagskedjor (SEHOP) är en minskning mot *SEH (Structured Exception Handler) överskrivningstekniken.*</span><span class="sxs-lookup"><span data-stu-id="7aa52-378">Validate exception chains (SEHOP) is a mitigation against the *Structured Exception Handler (SEH) overwrite* exploitation technique.</span></span> <span data-ttu-id="7aa52-379">[Strukturerad undantagshantering](https://docs.microsoft.com/windows/win32/debug/structured-exception-handling) är den process som ett program kan be att ta hand om ett visst undantag.</span><span class="sxs-lookup"><span data-stu-id="7aa52-379">[Structured exception handling](https://docs.microsoft.com/windows/win32/debug/structured-exception-handling) is the process by which an application can ask to handle a particular exception.</span></span> <span data-ttu-id="7aa52-380">Undantagshanterare är kedjehanterare så att om en undantagshanterare väljer att inte hantera ett visst undantag kan det skickas till nästa undantagshanterare i kedjan tills det är en som bestämmer sig för att hantera det.</span><span class="sxs-lookup"><span data-stu-id="7aa52-380">Exception handlers are chained together, so that if one exception handler chooses not to handle a particular exception, it can be passed on to the next exception handler in the chain until one decides to handle it.</span></span> <span data-ttu-id="7aa52-381">Eftersom listan med hanterare är dynamisk lagras den i stapeln.</span><span class="sxs-lookup"><span data-stu-id="7aa52-381">Because the list of handler is dynamic, it is stored on the stack.</span></span> <span data-ttu-id="7aa52-382">En attack kan använda ett stack overflow-sårbarhet för att sedan skriva över undantagshanteraren med en pekare till valfri kod för attackeraren.</span><span class="sxs-lookup"><span data-stu-id="7aa52-382">An attacker can use a stack overflow vulnerability to then overwrite the exception handler with a pointer to the code of the attacker's choice.</span></span>

<span data-ttu-id="7aa52-383">Den här begränsningen beror på utformningen av SEH, där varje SEH-post innehåller både en pekare till undantagshanteraren och en pekare till nästa hanterare i undantagskedjan.</span><span class="sxs-lookup"><span data-stu-id="7aa52-383">This mitigation relies on the design of SEH, where each SEH entry contains both a pointer to the exception handler, as well as a pointer to the next handler in the exception chain.</span></span> <span data-ttu-id="7aa52-384">Den här begränsningen anropas av undantagscentralen, som verifierar SEH-kedjan när ett undantag anropas.</span><span class="sxs-lookup"><span data-stu-id="7aa52-384">This mitigation is called by the exception dispatcher, which validates the SEH chain when an exception is invoked.</span></span> <span data-ttu-id="7aa52-385">Det verifierar att:</span><span class="sxs-lookup"><span data-stu-id="7aa52-385">It verifies that:</span></span>

- <span data-ttu-id="7aa52-386">Alla poster i undantagskedjan ligger inom stack-gränserna</span><span class="sxs-lookup"><span data-stu-id="7aa52-386">All exception chain records are within the stack boundaries</span></span>
- <span data-ttu-id="7aa52-387">Alla undantagsposter justeras</span><span class="sxs-lookup"><span data-stu-id="7aa52-387">All exception records are aligned</span></span>
- <span data-ttu-id="7aa52-388">Pekare utan undantag pekar på högen</span><span class="sxs-lookup"><span data-stu-id="7aa52-388">No exception handler pointers are pointing to the stack</span></span>
- <span data-ttu-id="7aa52-389">Det finns inga bakåtpekare</span><span class="sxs-lookup"><span data-stu-id="7aa52-389">There are no backward pointers</span></span>
- <span data-ttu-id="7aa52-390">Undantagskedjan slutar vid en känd slutlig undantagshanterare</span><span class="sxs-lookup"><span data-stu-id="7aa52-390">The exception chain ends at a known final exception handler</span></span>

<span data-ttu-id="7aa52-391">Om de här valideringarna misslyckas avbryts undantagshanteringen och undantaget hanteras inte.</span><span class="sxs-lookup"><span data-stu-id="7aa52-391">If these validations fail, then exception handling is aborted, and the exception will not be handled.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="7aa52-392">Överväganden för kompatibilitet</span><span class="sxs-lookup"><span data-stu-id="7aa52-392">Compatibility considerations</span></span>

<span data-ttu-id="7aa52-393">Kompatibilitetsproblem med SEHOP är relativt sällsynta.</span><span class="sxs-lookup"><span data-stu-id="7aa52-393">Compatibility issues with SEHOP are relatively rare.</span></span> <span data-ttu-id="7aa52-394">Det är ovanligt att ett program tar ett beroende av att skada undantagskedjan.</span><span class="sxs-lookup"><span data-stu-id="7aa52-394">It's uncommon for an application to take a dependency on corrupting the exception chain.</span></span> <span data-ttu-id="7aa52-395">Men vissa program påverkas av diskreta ändringar i tidsinställningen, som kan visa sig som ett tävlingsvillkor som visar en sen trådande bugg i programmet.</span><span class="sxs-lookup"><span data-stu-id="7aa52-395">However, some applications are impacted by the subtle changes in timing, which may manifest as a race condition that reveals a latent multi-threading bug in the application.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="7aa52-396">Konfigurationsalternativ</span><span class="sxs-lookup"><span data-stu-id="7aa52-396">Configuration options</span></span>

> [!Note]
> <span data-ttu-id="7aa52-397">**Verifiera undantagskedjor (SEHOP)** har inget granskningsläge.</span><span class="sxs-lookup"><span data-stu-id="7aa52-397">**Validate exception chains (SEHOP)** has no audit mode.</span></span>

## <a name="validate-handle-usage"></a><span data-ttu-id="7aa52-398">Verifiera användning av handtag</span><span class="sxs-lookup"><span data-stu-id="7aa52-398">Validate handle usage</span></span>

### <a name="description"></a><span data-ttu-id="7aa52-399">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7aa52-399">Description</span></span>

<span data-ttu-id="7aa52-400">*Verifiera användning av handtag* är en minskning som hjälper till att skydda mot en attackerare med hjälp av ett befintligt handtag för att komma åt ett skyddat objekt.</span><span class="sxs-lookup"><span data-stu-id="7aa52-400">*Validate handle usage* is a mitigation that helps protect against an attacker using an existing handle to access a protected object.</span></span> <span data-ttu-id="7aa52-401">Ett [handtag](https://docs.microsoft.com/windows/win32/sysinfo/handles-and-objects) är en referens till ett skyddat objekt.</span><span class="sxs-lookup"><span data-stu-id="7aa52-401">A [handle](https://docs.microsoft.com/windows/win32/sysinfo/handles-and-objects) is a reference to a protected object.</span></span> <span data-ttu-id="7aa52-402">Om programkoden refererar till ett ogiltigt handtag, kan det bero på att ett adversaryt försöker använda ett handtag som det har spelats in tidigare (men vilka programreferenser som inte räknas)</span><span class="sxs-lookup"><span data-stu-id="7aa52-402">If application code is referencing an invalid handle, that could indicate that an adversary is attempting to use a handle it has previously recorded (but which application reference counting wouldn't be aware of).</span></span> <span data-ttu-id="7aa52-403">Om programmet försöker använda ett ogiltigt objekt, i stället för att bara returnera null, kommer programmet att ta upp ett undantag (STATUS_INVALID_HANDLE).</span><span class="sxs-lookup"><span data-stu-id="7aa52-403">If the application attempts to use an invalid object, instead of simply returning null, the application will raise an exception (STATUS_INVALID_HANDLE).</span></span>

<span data-ttu-id="7aa52-404">Den här begränsningen tillämpas automatiskt på Windows Store-program.</span><span class="sxs-lookup"><span data-stu-id="7aa52-404">This mitigation is automatically applied to Windows Store applications.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="7aa52-405">Överväganden för kompatibilitet</span><span class="sxs-lookup"><span data-stu-id="7aa52-405">Compatibility considerations</span></span>

<span data-ttu-id="7aa52-406">Program som inte korrekt hanterar referenser och som inte radsluter dessa åtgärder i undantagshanterare kommer potentiellt att påverkas av den här begränsningen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-406">Applications that were not accurately tracking handle references, and which were not wrapping these operations in exception handlers, will potentially be impacted by this mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="7aa52-407">Konfigurationsalternativ</span><span class="sxs-lookup"><span data-stu-id="7aa52-407">Configuration options</span></span>

> [!Note]
> <span data-ttu-id="7aa52-408">**Verifieringshandtagsanvändning** har inget granskningsläge.</span><span class="sxs-lookup"><span data-stu-id="7aa52-408">**Validate handle usage** has no audit mode.</span></span>

## <a name="validate-heap-integrity"></a><span data-ttu-id="7aa52-409">Verifiera heapintegritet</span><span class="sxs-lookup"><span data-stu-id="7aa52-409">Validate heap integrity</span></span>

### <a name="description"></a><span data-ttu-id="7aa52-410">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7aa52-410">Description</span></span>

<span data-ttu-id="7aa52-411">Minskningar av validerade *heapintegritet* ökar skyddsnivån för minskningar av heap i Windows, genom att orsaka att programmet avbryts om en förvanskning av en heap upptäcks.</span><span class="sxs-lookup"><span data-stu-id="7aa52-411">The *validate heap integrity* mitigation increases the protection level of heap mitigations in Windows, by causing the application to terminate if a heap corruption is detected.</span></span> <span data-ttu-id="7aa52-412">Minskningar omfattar:</span><span class="sxs-lookup"><span data-stu-id="7aa52-412">The mitigations include:</span></span>

- <span data-ttu-id="7aa52-413">Förhindra att ett HEAP-handtag frigörs</span><span class="sxs-lookup"><span data-stu-id="7aa52-413">Preventing a HEAP handle from being freed</span></span>
- <span data-ttu-id="7aa52-414">Utföra en ytterligare validering för utökade blockeringsrubriker för heapallokeringar</span><span class="sxs-lookup"><span data-stu-id="7aa52-414">Performing another validation on extended block headers for heap allocations</span></span>
- <span data-ttu-id="7aa52-415">Verifiera att heaptilldelningar inte redan är flaggade som i bruk</span><span class="sxs-lookup"><span data-stu-id="7aa52-415">Verifying that heap allocations are not already flagged as in-use</span></span>
- <span data-ttu-id="7aa52-416">Lägga till skyddsidor till stora tilldelningar, heapsegment och undersegment som är större än en minsta storlek</span><span class="sxs-lookup"><span data-stu-id="7aa52-416">Adding guard pages to large allocations, heap segments, and subsegments above a minimum size</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="7aa52-417">Överväganden för kompatibilitet</span><span class="sxs-lookup"><span data-stu-id="7aa52-417">Compatibility considerations</span></span>

<span data-ttu-id="7aa52-418">Den här begränsningen är redan tillämpad som standard för 64-bitarsprogram och för 32-bitarsprogram som är inriktade på Windows Vista eller senare.</span><span class="sxs-lookup"><span data-stu-id="7aa52-418">This mitigation is already applied by default for 64-bit applications and for 32-bit applications targeting Windows Vista or later.</span></span> <span data-ttu-id="7aa52-419">Äldre program från Windows XP eller tidigare är oftast på risk, även om kompatibilitetsproblem är sällsynta.</span><span class="sxs-lookup"><span data-stu-id="7aa52-419">Legacy applications from Windows XP or earlier are most at-risk, though compatibility issues are rare.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="7aa52-420">Konfigurationsalternativ</span><span class="sxs-lookup"><span data-stu-id="7aa52-420">Configuration options</span></span>

> [!Note]
> <span data-ttu-id="7aa52-421">**Verifiera att heapintegritet** inte har något granskningsläge.</span><span class="sxs-lookup"><span data-stu-id="7aa52-421">**Validate heap integrity** has no audit mode.</span></span>

## <a name="validate-image-dependency-integrity"></a><span data-ttu-id="7aa52-422">Verifiera bildsambandsintegritet</span><span class="sxs-lookup"><span data-stu-id="7aa52-422">Validate image dependency integrity</span></span>

### <a name="description"></a><span data-ttu-id="7aa52-423">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7aa52-423">Description</span></span>

<span data-ttu-id="7aa52-424">Minskning *av verifiera bildsamband* hjälper till att skydda mot attacker som försöker ersätta kod för DLL-filer som statiskt länkas av Windows-binärfiler.</span><span class="sxs-lookup"><span data-stu-id="7aa52-424">The *validate image dependency* mitigation helps protect against attacks that attempt to substitute code for dlls that are statically linked by Windows binaries.</span></span> <span data-ttu-id="7aa52-425">Den teknik som används för att DLL-växt upp missbrukar inläsarens sökmekanism för att mata in skadlig kod som kan användas för att köra skadlig kod i ett förhöjdt sammanhang.</span><span class="sxs-lookup"><span data-stu-id="7aa52-425">The technique of DLL planting abuses the loader's search mechanism to inject malicious code, which can be used to get malicious code running in an elevated context.</span></span> <span data-ttu-id="7aa52-426">När inläsaren läser in en Windows-signerad binär fil och sedan läser in alla dll-filer som den binära versionen är beroende av, verifieras dessa binärfiler för att säkerställa att de även har signerats digitalt som binära Windows-filer.</span><span class="sxs-lookup"><span data-stu-id="7aa52-426">When the loader is loading a Windows signed binary, and then loads up any dlls that the binary depends on, these binaries will be verified to ensure that they are also digitally signed as a Windows binary.</span></span> <span data-ttu-id="7aa52-427">Om signaturkontrollen misslyckas läses dll-filen inte in och ett undantag returneras och statusen för den STATUS_INVALID_IMAGE_HASH.</span><span class="sxs-lookup"><span data-stu-id="7aa52-427">If they fail the signature check, the dll will not be loaded, and will throw an exception, returning a status of STATUS_INVALID_IMAGE_HASH.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="7aa52-428">Överväganden för kompatibilitet</span><span class="sxs-lookup"><span data-stu-id="7aa52-428">Compatibility considerations</span></span>

<span data-ttu-id="7aa52-429">Kompatibilitetsproblem är ovanliga.</span><span class="sxs-lookup"><span data-stu-id="7aa52-429">Compatibility issues are uncommon.</span></span> <span data-ttu-id="7aa52-430">Program som är beroende av att ersätta Windows-binärfiler med lokala privata versioner kommer att påverkas, och det finns också en liten risk att visa diskreta tidsbuggar i flertrådade program.</span><span class="sxs-lookup"><span data-stu-id="7aa52-430">Applications that depend on replacing Windows binaries with local private versions will be impacted, and there is also a small risk of revealing subtle timing bugs in multi-threaded applications.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="7aa52-431">Konfigurationsalternativ</span><span class="sxs-lookup"><span data-stu-id="7aa52-431">Configuration options</span></span>

<span data-ttu-id="7aa52-432">**Endast granskning** – Du kan aktivera den här begränsningen i granskningsläget för att mäta den potentiella kompatibilitets påverkan på ett program.</span><span class="sxs-lookup"><span data-stu-id="7aa52-432">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="7aa52-433">Granskningshändelser kan sedan visas i händelsevisaren eller använda Avancerad sökning i [Microsoft Defender för slutpunkt.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="7aa52-433">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="validate-stack-integrity-stackpivot"></a><span data-ttu-id="7aa52-434">Validera stack-integritet (StackPivot)</span><span class="sxs-lookup"><span data-stu-id="7aa52-434">Validate stack integrity (StackPivot)</span></span>

### <a name="description"></a><span data-ttu-id="7aa52-435">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7aa52-435">Description</span></span>

<span data-ttu-id="7aa52-436">Minskningar av *StackPivot-stack-integritet (StackPivot)* skyddar mot Stack Pivot-attack, en ROP-attack där en attack skapar en falsk hög i heapminnet och hjälper sedan programmet att gå tillbaka till den falska stacken som styr flödet av körning.</span><span class="sxs-lookup"><span data-stu-id="7aa52-436">The *validate stack integrity (StackPivot)* mitigation helps protect against the Stack Pivot attack, a ROP attack where an attacker creates a fake stack in heap memory, and then tricks the application into returning into the fake stack that controls the flow of execution.</span></span>

<span data-ttu-id="7aa52-437">Den här minskning av skärningspunkt många Windows-API:er och kontrollerar värdet för stack-pekaren.</span><span class="sxs-lookup"><span data-stu-id="7aa52-437">This mitigation intercepts many Windows APIs, and inspects the value of the stack pointer.</span></span> <span data-ttu-id="7aa52-438">Om adressen till stack-pekaren inte faller mellan nederkanten och toppen av högen registreras en händelse och, om den inte är i granskningsläge, avslutas processen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-438">If the address of the stack pointer does not fall between the bottom and the top of the stack, then an event is recorded and, if not in audit mode, the process will be terminated.</span></span>

<span data-ttu-id="7aa52-439">API:erna som snappas upp av den här begränsningen är:</span><span class="sxs-lookup"><span data-stu-id="7aa52-439">The APIs intercepted by this mitigation are:</span></span>

- `LoadLibraryA`
- `LoadLibraryW`
- `LoadLibraryExA`
- `LoadLibraryExW`
- `LdrLoadDll`
- `VirtualAlloc`
- `VirtualAllocEx`
- `NtAllocateVirtualMemory`
- `VirtualProtect`
- `VirtualProtectEx`
- `NtProtectVirtualMemory`
- `HeapCreate`
- `RtlCreateHeap`
- `CreateProcessA`
- `CreateProcessW`
- `CreateProcessInternalA`
- `CreateProcessInternalW`
- `NtCreateUserProcess`
- `NtCreateProcess`
- `NtCreateProcessEx`
- `CreateRemoteThread`
- `CreateRemoteThreadEx`
- `NtCreateThreadEx`
- `WriteProcessMemory`
- `NtWriteVirtualMemory`
- `WinExec`
- `CreateFileMappingA`
- `CreateFileMappingW`
- `CreateFileMappingNumaW`
- `NtCreateSection`
- `MapViewOfFile`
- `MapViewOfFileEx`
- `MapViewOfFileFromApp`
- `LdrGetProcedureAddressForCaller`

### <a name="compatibility-considerations"></a><span data-ttu-id="7aa52-440">Överväganden för kompatibilitet</span><span class="sxs-lookup"><span data-stu-id="7aa52-440">Compatibility considerations</span></span>

<span data-ttu-id="7aa52-441">Program som använder falska staplar kommer att påverkas, och det finns också en liten risk att visa diskreta tidsbuggar i flertrådade program.</span><span class="sxs-lookup"><span data-stu-id="7aa52-441">Applications that are using fake stacks will be impacted, and there is also a small risk of revealing subtle timing bugs in multi-threaded applications.</span></span>
<span data-ttu-id="7aa52-442">Program som utför API-avlyssning, särskilt säkerhetsprogramvara, kan orsaka kompatibilitetsproblem med den här begränsningen.</span><span class="sxs-lookup"><span data-stu-id="7aa52-442">Applications that perform API interception, particularly security software, can cause compatibility problems with this mitigation.</span></span>

<span data-ttu-id="7aa52-443">Den här minskningar är inkompatibla med minskning av Arbitrary Code Guard.</span><span class="sxs-lookup"><span data-stu-id="7aa52-443">This mitigation is incompatible with the Arbitrary Code Guard mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="7aa52-444">Konfigurationsalternativ</span><span class="sxs-lookup"><span data-stu-id="7aa52-444">Configuration options</span></span>

<span data-ttu-id="7aa52-445">**Endast granskning** – Du kan aktivera den här begränsningen i granskningsläget för att mäta den potentiella kompatibilitets påverkan på ett program.</span><span class="sxs-lookup"><span data-stu-id="7aa52-445">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="7aa52-446">Granskningshändelser kan sedan visas i händelsevisaren eller använda Avancerad sökning i [Microsoft Defender för slutpunkt.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="7aa52-446">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>
